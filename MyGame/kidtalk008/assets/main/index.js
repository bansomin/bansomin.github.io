window.__require=function t(e,n,i){function c(o,l){if(!n[o]){if(!e[o]){var u=o.split("/");if(u=u[u.length-1],!e[u]){var s="function"==typeof __require&&__require;if(!l&&s)return s(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+o+"'")}o=u}var r=n[o]={exports:{}};e[o][0].call(r.exports,function(t){return c(e[o][1][t]||t)},r,r.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof __require&&__require,o=0;o<i.length;o++)c(i[o]);return c}({AnimCtrl:[function(t,e){"use strict";cc._RF.push(e,"df8c5X8Yo5EhZ2YCSabUY2J","AnimCtrl");var n=["01","01_2","dianji"];cc.Class({extends:cc.Component,properties:{particlePreb:{default:null,type:cc.Prefab},particleNode:{default:null,type:cc.Node},clickNodeList:{default:[],type:cc.Node}},onLoad:function(){},showClickAnimation:function(t,e){for(var i=0;i<this.clickNodeList.length;i++)this.clickNodeList[i].active=!1;var c=this.clickNodeList[t];if(null!=c&&null!=c){c.x=e.x-cc.winSize.width/2,c.y=e.y-cc.winSize.height/2;var a=c.getComponent("baseDragon");if(a){c.active=!0;var o="0"==t?4:null;a.playAnimation(n[t],o,1,function(){c.active=!1})}}}}),cc._RF.pop()},{}],Global:[function(t,e){"use strict";cc._RF.push(e,"5b57cRzx91BHrVzrUm7nlFn","Global"),window.Global=window.Global||{},window.reStartGame=function(){cc.game.restart()},window.startGame=function(e){window.isShow=!0,cc.game.on(cc.game.EVENT_HIDE,function(){window.isShow&&(window.isShow=!1)}),cc.game.on(cc.game.EVENT_SHOW,function(){window.isShow||(window.isShow=!0)}),Global.musicManager=e.getComponent("MusicManager"),Global.tools=t("Tools")()},cc._RF.pop()},{Tools:"Tools"}],MainScene:[function(t,e){"use strict";cc._RF.push(e,"5e5966z/eFO2ar90G3Leqy1","MainScene"),cc.Class({extends:cc.Component,properties:{musicNode:{default:null,type:cc.Node},turnableNode:{default:null,type:cc.Node},courseNode:{default:null,type:cc.Node},animNode:{default:null,type:cc.Node}},onLoad:function(){startGame(this.musicNode),this.resetData(),this._animCtrl=this.animNode.getComponent("AnimCtrl"),this._turnableCtrl=this.turnableNode.getComponent("turnable"),this._turnableCtrl.onSetParent(this),this._courseCtrl=this.courseNode.getComponent("course"),this._courseCtrl.onSetParent(this)},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onStart,this)},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onStart,this)},onStart:function(t){this._animCtrl.showClickAnimation("2",t.getLocation()),Global.musicManager.playEffect("eff_pop")},page:function(t){Global.musicManager.playEffect("eff_page"),this._courseCtrl.onSetData(t),this.courseNode.active=!0,this.turnableNode.active=!1},onClickBtn:function(t,e){console.log("main_onClickBtn:"+e),"home"==e?this.resetData():"pre"==e?this._turnableCtrl.onClickArrowBtn(t,-1):"next"==e?this._turnableCtrl.onClickArrowBtn(t,1):"left"==e&&this.resetData()},resetData:function(){this.courseNode.active=!1,this.turnableNode.active=!0}}),cc._RF.pop()},{}],MusicManager:[function(t,e){"use strict";cc._RF.push(e,"39791WNy0tBKrjbmaLNyJjv","MusicManager"),cc.Class({extends:cc.Component,properties:{bgMusic:{default:null,type:cc.AudioClip},eff_blink:{default:null,type:cc.AudioClip},eff_ding:{default:null,type:cc.AudioClip},eff_hitHand:{default:null,type:cc.AudioClip},eff_page:{default:null,type:cc.AudioClip},eff_pop:{default:null,type:cc.AudioClip},Sound1_0:{default:null,type:cc.AudioClip},Sound1_1:{default:null,type:cc.AudioClip},Sound1_2:{default:null,type:cc.AudioClip},Sound1_3:{default:null,type:cc.AudioClip},Sound1_4:{default:null,type:cc.AudioClip},Sound2_0:{default:null,type:cc.AudioClip},Sound2_1:{default:null,type:cc.AudioClip},Sound2_2:{default:null,type:cc.AudioClip},Sound2_3:{default:null,type:cc.AudioClip},Sound2_4:{default:null,type:cc.AudioClip},Sound3_0:{default:null,type:cc.AudioClip},Sound3_1:{default:null,type:cc.AudioClip},Sound3_2:{default:null,type:cc.AudioClip},Sound3_3:{default:null,type:cc.AudioClip},Sound3_4:{default:null,type:cc.AudioClip},Sound4_0:{default:null,type:cc.AudioClip},Sound4_1:{default:null,type:cc.AudioClip},Sound4_2:{default:null,type:cc.AudioClip},Sound4_3:{default:null,type:cc.AudioClip},Sound4_4:{default:null,type:cc.AudioClip},Sound5_0:{default:null,type:cc.AudioClip},Sound5_1:{default:null,type:cc.AudioClip},Sound5_2:{default:null,type:cc.AudioClip},Sound5_3:{default:null,type:cc.AudioClip},Sound5_4:{default:null,type:cc.AudioClip},Sound6_0:{default:null,type:cc.AudioClip},Sound6_1:{default:null,type:cc.AudioClip},Sound6_2:{default:null,type:cc.AudioClip},Sound6_3:{default:null,type:cc.AudioClip},Sound6_4:{default:null,type:cc.AudioClip}},playEffect:function(t,e,n){void 0===e&&(e=!1);var i=this[t];if(null!=i&&null!=i){var c=e?cc.audioEngine.playMusic(i,!0):cc.audioEngine.play(i,!1,1);cc.audioEngine.setFinishCallback(c,function(){n&&n()})}},pauseBGMusic:function(){cc.audioEngine.stopMusic()},stopAllEffects:function(){cc.audioEngine.stopAllEffects()}}),cc._RF.pop()},{}],RoleJS:[function(t,e){"use strict";cc._RF.push(e,"dec27e8i4VGPoxj2YOciTiv","RoleJS");var n=t("baseDragon"),i=cc.Enum({IDLE:0,INGAME:1,DONE:2});cc.Class({extends:n,properties:{_AnimData:null,_ActionData:null,_curTimer:null,_curHeroStatus:null,_curActionData:null,_curAnimData:null,_isCanChange:!1,_lastActionIndex:null,_curActionIndex:null,_curActionTime:0},onLoad:function(){this._super(),this.clearData(),this._AnimData=t("Anim_"+this.node.name),this._ActionData=t("Action_"+this.node.name)},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onStart,this)},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onStart,this)},onStart:function(){1!=this.node.isAuto&&this.updateNext()},onSetParent:function(t){this._parentCtrl=t,this.updateNext(!0)},updateNext:function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),this.node.isAuto)if(t)this._curActionIndex=0;else{var n=Global.tools.getRandomNum(1,this._ActionData.length-1);if(n==this._curActionIndex)return void this.updateNext(t,t);this._curActionIndex=n}else{if(t||e)return this.playIdleAnimation(),void(this._curHeroStatus=i.DONE);this._curActionIndex=0}this._curActionData=this._ActionData[this._curActionIndex],this._curAnimData=this._AnimData[this._curActionData.AnimPID],this._curActionTime=parseInt(this._curActionData.Time),this.stopAnimation(),this.playAnimation(this._curAnimData.Name,null,0,this.callback.bind(this)),this._curHeroStatus=i.INGAME,this._isCanChange=!1},callback:function(){0!=this._isCanChange&&this.updateNext(!1,!0)},clearData:function(){this._isCanChange=!1,this._parentCtrl=null,this._curTimer=Date.now(),this._curActionIndex=null,this._lastActionIndex=null,this._curActionTime=0,this._curActionData=null,this._curAnimData=null,this._curHeroStatus=i.IDLE},update:function(){var t=Date.now(),e=t-this._curTimer;e>=100&&(this._curTimer=t,this._curHeroStatus==i.INGAME&&(this._curActionTime-=e,this._curActionTime=this._curActionTime<=0?0:this._curActionTime,0==this._curActionTime&&(this._isCanChange=!0)))}}),cc._RF.pop()},{baseDragon:"baseDragon"}],Tools:[function(t,e){"use strict";cc._RF.push(e,"b0725gdMZNKXrVND8Mafz7Y","Tools");var n=function(){this.resetData()},i=n.prototype,c=null;i.resetData=function(){},i.getRandomNum=function(t,e){return parseInt(Math.random()*(e-t+1)+t)},i.getRandomArray=function(t){for(var e=[],n=0;n<t;n++)e.push(n);for(var i=0;i<e.length;i++){var c=parseInt(Math.random()*e.length),a=e[c];e[c]=e[i],e[i]=a}return e},i.fitFunc=function(t){var e=cc.view.getVisibleSize(),n=cc.view.getDesignResolutionSize();e.width/n.width>e.height/n.height?(cc.log("fitHeight"),t.fitHeight=!0,t.fitWidth=!1):e.width/n.width<e.height/n.height&&(cc.log("fitWidth"),t.fitHeight=!1,t.fitWidth=!0)},i.getBase64Image=function(t){return new Promise(function(e,n){cc.loader.loadRes(t,function(t,i){if(t)n(t);else{var c=document.createElement("CANVAS"),a=c.getContext("2d"),o=i.getHtmlElementObj();c.width=o.width,c.height=o.height,a.drawImage(o,0,0,c.width,c.height);var l=c.toDataURL("image/png");c=null,e(l)}})})},e.exports=function(){return c||(c=new n),c},cc._RF.pop()},{}],baseDragon:[function(t,e){"use strict";cc._RF.push(e,"41f50JIpg5NpKGHC4g7OuC6","baseDragon"),cc.Class({extends:cc.Component,properties:{defaultIdle:"",_callBack:null,_curAnimName:null},onLoad:function(){this._callBack=null,this._curAnimName=null,this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.LOOP_COMPLETE,this)},LOOP_COMPLETE:function(){cc.log("LOOP_COMPLETE"),this._callBack&&this._callBack()},playIdleAnimation:function(t,e){void 0===t&&(t=0),""!=this.defaultIdle&&this.playAnimation(this.defaultIdle,null,t,e)},playAnimation:function(t,e,n,i){void 0===n&&(n=0),this._curAnimName=t,e?this._armature.animation.gotoAndPlayByFrame(t,e,n):this._armature.animation.play(t,n),this._callBack=i},stopAnimation:function(t){var e=t||this._curAnimName;this._armature.animation.stop(e),this._curAnimName=null}}),cc._RF.pop()},{}],courseCell:[function(t,e){"use strict";cc._RF.push(e,"7451f6yzXRKO4dd4PT1gZp0","courseCell"),t("turnableData"),cc.Class({extends:cc.Component,properties:{itemIcon:{default:null,type:cc.Sprite},maskIcon:{default:null,type:cc.Sprite},selectAnim:{default:null,type:cc.Node},hornAnim:{default:null,type:cc.Node},_isDone:!1,_data:null,_parentCtrl:null},onLoad:function(){},onDisable:function(){this.selectAnim.active=this.hornAnim.active=!1,this.maskIcon.node.active=this._isDone},onSetData:function(t,e){this.maskIcon.node.active=this.selectAnim.active=this.hornAnim.active=!1,this._data=e,this._parentCtrl=t;var n=this;cc.loader.loadRes("course/"+e,function(t,e){t?console.error(t):(n.itemIcon.spriteFrame=new cc.SpriteFrame(e),n.maskIcon.spriteFrame=new cc.SpriteFrame(e))})},onClickItem:function(){this._parentCtrl.onClickItem(this.node.index);var t=this;t.hornAnim.active=!0,t.maskIcon.node.active=!1;var e="Sound"+this._data.replace("-","_");Global.musicManager.playEffect(e,!1,function(){t.maskIcon.node.active=!0,t.hornAnim.active=!1,t._isDone=!0,t._parentCtrl.auto()})},updateUI:function(t){void 0===t&&(t=!1),this.selectAnim.active=t}}),cc._RF.pop()},{turnableData:"turnableData"}],courseData:[function(t,e){"use strict";cc._RF.push(e,"88afdvrayVBvJBbpRWzN/Wb","courseData");var n=[];n[0]={PID:"0",Name:"Course 01",Page_0:"1-1|1-2|1-3|1-4",Page_1:"1-0"},n[1]={PID:"1",Name:"Course 02",Page_0:"2-1|2-2|2-3|2-4",Page_1:"2-0"},n[2]={PID:"2",Name:"Course 03",Page_0:"3-1|3-2|3-3|3-4",Page_1:"3-0"},n[3]={PID:"3",Name:"Course 04",Page_0:"4-1|4-2|4-3|4-4",Page_1:"4-0"},n[4]={PID:"4",Name:"Course 05",Page_0:"5-1|5-2|5-3|5-4",Page_1:"5-0"},n[5]={PID:"5",Name:"Course 06",Page_0:"6-1|6-2|6-3|6-4",Page_1:"6-0"},e.exports=n,cc._RF.pop()},{}],course:[function(t,e){"use strict";cc._RF.push(e,"084f5PSgyVPSIltLs/4sL9b","course");var n=t("courseData"),i=cc.Enum({one:0,two:1});cc.Class({extends:cc.Component,properties:{vLayoutList:{default:[],type:cc.Node},groupCell:{default:null,type:cc.Prefab},courseCell:{default:null,type:cc.Prefab},courseCell1:{default:null,type:cc.Prefab},columnNum:{default:2,step:1,notify:function(){this.onSetData(1)}},rightBtn:{default:null,type:cc.Node},_curIndex:0,_curPageIndex:i.one,_lastIndex:null,_data:null,_parentCtrl:null,_courseList0:[],_courseList:[],_isAutoFlag:!1},onLoad:function(){this._curPageIndex=i.one},onSetParent:function(t){this._parentCtrl=t},onSetData:function(t){this._isAutoFlag=!1,this._curIndex=t,this._data=n[t],this._courseList=[],this.vLayoutList[0].removeAllChildren();var e=cc.instantiate(this.groupCell);this.vLayoutList[0].addChild(e);for(var c=this._data.Page_0.split("|"),a=0;a<c.length;a++){a%this.columnNum==0&&0!=a&&(e=cc.instantiate(this.groupCell),this.vLayoutList[0].addChild(e));var o=cc.instantiate(this.courseCell);o.index=this._courseList.length;var l=o.getComponent("courseCell");l.onSetData(this,c[a]),e.addChild(o);var u=new Object;u.item=o,u.ctrl=l,this._courseList0[a]=u,this._courseList[this._courseList.length]=u}this.vLayoutList[1].removeAllChildren();var s=cc.instantiate(this.groupCell);this.vLayoutList[1].addChild(s);for(var r=this._data.Page_1.split("|"),d=0;d<r.length;d++){d%this.columnNum==0&&0!=d&&(s=cc.instantiate(this.groupCell),this.vLayoutList[1].addChild(s));var h=cc.instantiate(this.courseCell1);h.index=this._courseList.length;var p=h.getComponent("courseCell");p.onSetData(this,r[d]),s.addChild(h);var _=new Object;_.item=h,_.ctrl=p,this._courseList[this._courseList.length]=_}this.updateUI(i.one)},updateUI:function(t){this._curPageIndex=t;for(var e=0;e<this.vLayoutList.length;e++)this.vLayoutList[e].active=t==e;this.rightBtn.active=this._curPageIndex!=i.two},onClickBtn:function(t,e){Global.musicManager.stopAllEffects(),"home"==e?(Global.musicManager.playEffect("eff_page"),this._parentCtrl.onClickBtn(t,e)):"pre"==e?this._parentCtrl.onClickBtn(t,e):"next"==e?this._parentCtrl.onClickBtn(t,e):"left"==e?this._curPageIndex==i.one?(Global.musicManager.playEffect("eff_page"),this._parentCtrl.onClickBtn(t,e)):this._curPageIndex==i.two&&(Global.musicManager.playEffect("eff_page"),this.updateUI(i.one)):"right"==e&&(Global.musicManager.playEffect("eff_blink"),this.updateUI(i.two))},onClickItem:function(t){for(var e=0;e<this._courseList.length;e++){var n=this._courseList[e];n.ctrl&&n.ctrl.updateUI(e==t)}},auto:function(){if(1!=this._isAutoFlag){for(var t=!0,e=0;e<this._courseList0.length;e++){var n=this._courseList0[e];if(n&&0==n.ctrl.maskIcon.node.active){t=!1;break}}t&&(Global.musicManager.playEffect("eff_blink"),this._isAutoFlag=!0,this.updateUI(i.two))}}}),cc._RF.pop()},{courseData:"courseData"}],touch:[function(t,e,n){"use strict";cc._RF.push(e,"ae8f9Qqmv1Mk4yZBWBfM8H1","touch"),Object.defineProperty(n,"__esModule",{value:!0}),n.TransmitTouch=void 0;var i=cc._decorator,c=i.ccclass,a=i.property,o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickEvents=new Array,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){null!=t.clickEvents&&cc.Component.EventHandler.emitEvents(t.clickEvents,e)}),this.node._touchListener.setSwallowTouches(!1)},e.prototype.click=function(){console.log("CC")},__decorate([a([cc.Component.EventHandler])],e.prototype,"clickEvents",void 0),__decorate([c],e)}(cc.Component);n.TransmitTouch=o,cc._RF.pop()},{}],turnableCell:[function(t,e){"use strict";cc._RF.push(e,"d8495DV2JdBFZqnZyUkuwes","turnableCell"),cc.Class({extends:cc.Component,properties:{itemIcon:{default:null,type:cc.Sprite},titleLab:{default:null,type:cc.Label},_data:null,_parentCtrl:null},onSetData:function(t,e,n){this.itemIcon.spriteFrame=this.titleLab.string="",this._data=e,this._parentCtrl=t;var i=this;cc.loader.loadRes(e.Icon,function(t,e){t?console.error(t):i.itemIcon.spriteFrame=new cc.SpriteFrame(e)}),this.itemIcon.node.angle=n},onClickBtn:function(){Global.musicManager.playEffect("eff_click"),this._parentCtrl&&this._parentCtrl.onClickBtn(null,this._data.PID)}}),cc._RF.pop()},{}],turnableData:[function(t,e){"use strict";cc._RF.push(e,"b3026fXphBHdafFDK6DofdN","turnableData");var n=[];n[0]={PID:"0",Name:"Trunable 01",Icon:"icon/Y1-0"},n[1]={PID:"1",Name:"Trunable 02",Icon:"icon/Y2-0"},n[2]={PID:"2",Name:"Trunable 03",Icon:"icon/Y3-0"},n[3]={PID:"3",Name:"Trunable 04",Icon:"icon/Y4-0"},n[4]={PID:"4",Name:"Trunable 05",Icon:"icon/Y5-0"},n[5]={PID:"5",Name:"Trunable 06",Icon:"icon/Y6-0"},e.exports=n,cc._RF.pop()},{}],turnable:[function(t,e){"use strict";cc._RF.push(e,"e9cb7LWZ4ZHSp2sXu/SNIdW","turnable");var n=t("turnableData");cc.Class({extends:cc.Component,properties:{rootNode:{default:null,type:cc.Node},turnableCell:{default:null,type:cc.Prefab},pointer:{default:null,type:cc.Node},blockNum:{default:1,step:1,notify:function(){this.blockNum<2&&(this.blockNum=2),this.blockNum>n.length&&(this.blockNum=n.length),this.initUI()}},_parentCtrl:null,_turnableList:[],_curIndex:0,_lastIndex:0,_curTimer:null,_isRunning:!1},onLoad:function(){this._isRunning=!1,this._lastIndex=this._curIndex=0,this._curTimer=Date.now(),this.initUI()},onSetParent:function(t){this._parentCtrl=t},initUI:function(){this.rootNode.removeAllChildren(),this._turnableList=[];for(var t=0;t<this.blockNum;t++){var e=360*t/this.blockNum,i=cc.instantiate(this.turnableCell),c=i.getComponent("turnableCell");c&&c.onSetData(this,n[t],e),i.angle=-e,this.rootNode.addChild(i);var a=new Object;a.item=i,a.ctrl=c,this._turnableList[t]=a}},onClickArrowBtn:function(t,e){this._lastIndex=this._curIndex,this._curIndex+=e,this._curIndex<0&&(this._curIndex=n.length-1),this._curIndex>n.length-1&&(this._curIndex=0),this.updateState(),this.onClickBtn(null,this._curIndex)},onClickBtn:function(t,e){if(1!=this._isRunning){this._isRunning=!0;var n=360/this.blockNum,i=null==t?e:Global.tools.getRandomNum(0,this.blockNum-1),c=null==t?n*i:1800+n*i,a=null==t?.1:2,o=null==t?.1:1,l=this;this.pointer.runAction(cc.sequence(cc.rotateTo(a,c),cc.delayTime(o),cc.callFunc(function(){l._isRunning=!1,l._parentCtrl&&l._parentCtrl.page(l._curIndex)})))}},update:function(){if(0!=this._isRunning&&Date.now()-this._curTimer>=100){this._curTimer=Date.now();var t=360*parseInt(this.pointer.angle/360)-this.pointer.angle;if(t<0&&(t+=360),this._curIndex=parseInt(t/(360/this.blockNum)),this._lastIndex!=this._curIndex){Global.musicManager.playEffect("eff_ding");for(var e=0;e<this._turnableList.length;e++)this._turnableList[e].item.stopAllActions(),e==this._curIndex?(this._turnableList[e].item.zIndex=100,this._turnableList[e].item.runAction(cc.scaleTo(.1,1.1,1.1))):(this._turnableList[e].item.zIndex=0,this._turnableList[e].item.runAction(cc.scaleTo(.1,1,1)));this._lastIndex=this._curIndex}}},updateState:function(){this._turnableList[this._lastIndex].item.zIndex=0,this._turnableList[this._lastIndex].item.scale=1,this._turnableList[this._curIndex].item.zIndex=100,this._turnableList[this._curIndex].item.scale=1.1}}),cc._RF.pop()},{turnableData:"turnableData"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"057afAyA5JJGr6nrjpmLp/w","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","MainScene","AnimCtrl","Global","MusicManager","Tools","baseDragon","RoleJS","course","courseCell","courseData","turnableData","touch","turnable","turnableCell"]);
window.__require=function t(e,o,i){function n(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return n(e[c][1][t]||t)},p,p.exports,t,e,o,i)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({AnimationCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"278dfh88/dGRZmDIR7E1Tpc","AnimationCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=t("./common/Global"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickNode=null,e._clickAnimCtrl=null,e.tutorialNode=null,e.readyGoNode=null,e.flowerPref=null,e._flowerNode=null,e.animalPref=null,e._animalNode=null,e.dicePref=[],e._diceData={},e._isBackGround=!1,e._timer=null,e}return n(e,t),e.prototype.onLoad=function(){window.NOTIFICATION.on(c.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.on(c.clientEvent.EnterForeground,this.EnterForeground,this),this._isBackGround=!1,this.registerEvent(),this._flowerNode=cc.instantiate(this.flowerPref),this.node.addChild(this._flowerNode),this._animalNode=cc.instantiate(this.animalPref),this.node.addChild(this._animalNode),this.clearupAll(),this.addDice()},e.prototype.registerEvent=function(){window.NOTIFICATION.on(c.clientEvent.playAnimation,this.playAnimation,this),window.NOTIFICATION.on(c.clientEvent.gotoStep,this.gotoStep,this),window.NOTIFICATION.on(c.clientEvent.tutorial,this.tutorial,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onStart,this),this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1)},e.prototype.unregisterEvent=function(){window.NOTIFICATION.off(c.clientEvent.playAnimation,this.playAnimation,this),window.NOTIFICATION.off(c.clientEvent.gotoStep,this.gotoStep,this),window.NOTIFICATION.off(c.clientEvent.tutorial,this.tutorial,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onStart,this)},e.prototype.onStart=function(t){a.AudioManager.playEffect(c.AUDIO.EFFECT_POP);var e=this.node.convertToNodeSpaceAR(t.touch.getLocation());this.showClickAnimation(e)},e.prototype.addDice=function(){for(var t=0;t<2;t++){var e=this.dicePref[t],o=cc.instantiate(e);o.active=!1,this.node.addChild(o);var i=o.getComponent("diceCtrl");o.getComponent(cc.Button).interactable=!1;var n=new Object;n.key=t,n.item=o,n.ctrl=i,this._diceData[t]=n}},e.prototype.gotoStep=function(t){if(this._data=t,t.hasOwnProperty("stepType"))switch(t.stepType){case c.clientEvent.gotoCom_start:this.clearupAll()}},e.prototype.tutorial=function(t){if(this.tutorialNode.active=t.tutorialType==c.TYPE_TUTORIAL.SHOW,t.tutorialType==c.TYPE_TUTORIAL.SHOW&&t.data.hasOwnProperty("posData")){var e=this.node.convertToNodeSpaceAR(t.data.posData.position);t.data.posData.hasOwnProperty("dX")&&(e.x=e.x+=t.data.posData.dX),t.data.posData.hasOwnProperty("dY")&&(e.y=e.y+=t.data.posData.dY),this.tutorialNode.setPosition(e)}},e.prototype.playAnimation=function(t){if(t.hasOwnProperty("animationType"))switch(t.animationType){case c.clientEvent.playDiceAnimation:this.playDiceAnimation(t);break;case c.clientEvent.flyFlowerAnimation:this.flyFlowerAnimation(t);break;case c.clientEvent.eatFlowerAnimation:this.eatFlowerAnimation(t);break;case c.clientEvent.playReadGoAnimation:this.playReadGoAnimation()}},e.prototype.playDiceAnimation=function(t){var e=this,o=t.data.curModel,i=t.data.diceNumber;for(var n in this._diceData)if(Object.prototype.hasOwnProperty.call(this._diceData,n)){var r=this._diceData[n];r&&r.item&&(r.item.active=n==o)}var s=this._diceData[o];if(s&&s.item){var l=this.node.convertToNodeSpaceAR(t.data.posData.position);t.data.posData.hasOwnProperty("dX")&&(l.x=l.x+=t.data.posData.dX),t.data.posData.hasOwnProperty("dY")&&(l.y=l.y+=t.data.posData.dY),s.item.stopAllActions(),s.item.setPosition(l),s.item.runAction(cc.moveBy(.5,cc.v2(0,300))),s.ctrl.playAnimation("0",null,1,function(){a.AudioManager.playEffect(c.AUDIO.EFFECT_FLY_DICE),s.ctrl.playAnimation("0"+i,null,1,function(){s.ctrl.stopAnimation("0"+i),e._timer&&(e.unschedule(e._timer),e._timer=null),e._timer=function(){s.item.active=!1,window.NOTIFICATION.emit(c.clientEvent.playAnimation,{animationType:c.clientEvent.finishDiceAnimation}),e.unschedule(e._timer),e._timer=null},e.schedule(e._timer,1)})})}},e.prototype.flyFlowerAnimation=function(t){var e=this.node.convertToNodeSpaceAR(t.data.fromPosition),o=this.node.convertToNodeSpaceAR(t.data.toPosition),i=cc.v2((e.x+o.x)/2,(e.y+o.y)/2);this._flowerNode.setPosition(e);var n=this;this._flowerNode.stopAllActions(),this._flowerNode.opacity=0,this._flowerNode.setScale(0,0),this._flowerNode.rotation=0,this._flowerNode.active=!0,this._flowerNode.runAction(cc.sequence(cc.spawn(cc.sequence(cc.spawn(cc.fadeIn(.5),cc.moveTo(.5,i),cc.scaleTo(.5,4,4)),cc.spawn(cc.moveTo(.5,o),cc.scaleTo(.5,1,1))),cc.rotateTo(1,-70)),cc.callFunc(function(){n._flowerNode.active=!1,window.NOTIFICATION.emit(c.clientEvent.playAnimation,{animationType:c.clientEvent.finishFlyFlowerAnimation,data:{herodata:t.data.herodata}})})))},e.prototype.eatFlowerAnimation=function(t){var e=this.node.convertToNodeSpaceAR(t.data.fromPosition),o=this.node.convertToNodeSpaceAR(t.data.toPosition),i=cc.v2((e.x+o.x)/2,(e.y+o.y)/2);this._animalNode.setPosition(e);var n=this;this._animalNode.stopAllActions(),this._animalNode.opacity=0,this._animalNode.setScale(0,0),this._animalNode.rotation=0,this._animalNode.active=!0,this._animalNode.runAction(cc.sequence(cc.spawn(cc.sequence(cc.spawn(cc.fadeIn(.5),cc.moveTo(.5,i),cc.scaleTo(.5,4,4)),cc.spawn(cc.moveTo(.5,o),cc.scaleTo(.5,1,1))),cc.rotateTo(1,-70)),cc.callFunc(function(){n._animalNode.active=!1,window.NOTIFICATION.emit(c.clientEvent.playAnimation,{animationType:c.clientEvent.finishEatFlowerAnimation,data:{herodata:t.data.herodata}})})))},e.prototype.playReadGoAnimation=function(){this.readyGoNode.opacity=0,this.readyGoNode.setScale(0,0),this.readyGoNode.stopAllActions(),this.readyGoNode.active=!0,this.readyGoNode.runAction(cc.sequence(cc.spawn(cc.fadeIn(.5),cc.scaleTo(.25,1,1).easing(cc.easeBackInOut())),cc.delayTime(1),cc.spawn(cc.fadeOut(.5),cc.scaleTo(.5,0,0).easing(cc.easeBackInOut()))))},e.prototype.showClickAnimation=function(t){var e=this;this.clickNode.setPosition(t),this.clickNode.active=!0,this.getClickAnimCtrl().playAnimation("dianji",null,1,function(){e.getClickAnimCtrl().stopAnimation("dianji"),e.clickNode.active=!1})},e.prototype.getClickAnimCtrl=function(){return this._clickAnimCtrl||(this._clickAnimCtrl=this.clickNode.getComponent("baseDragon")),this._clickAnimCtrl},e.prototype.clearupAll=function(){this.tutorialNode.active=this.clickNode.active=this.readyGoNode.active=this._flowerNode.active=this._animalNode.active=!1},e.prototype.EnterBackground=function(){this._isBackGround=!0,this.unregisterEvent()},e.prototype.EnterForeground=function(){this._isBackGround&&(this._isBackGround=!1,this.registerEvent())},e.prototype.onDestroy=function(){window.NOTIFICATION.off(c.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.off(c.clientEvent.EnterForeground,this.EnterForeground,this),this.unregisterEvent()},r([p(cc.Node)],e.prototype,"clickNode",void 0),r([p()],e.prototype,"_clickAnimCtrl",void 0),r([p(cc.Node)],e.prototype,"tutorialNode",void 0),r([p(cc.Node)],e.prototype,"readyGoNode",void 0),r([p(cc.Prefab)],e.prototype,"flowerPref",void 0),r([p()],e.prototype,"_flowerNode",void 0),r([p(cc.Prefab)],e.prototype,"animalPref",void 0),r([p()],e.prototype,"_animalNode",void 0),r([p(cc.Prefab)],e.prototype,"dicePref",void 0),r([p()],e.prototype,"_diceData",void 0),r([p(cc.Boolean)],e.prototype,"_isBackGround",void 0),r([p()],e.prototype,"_timer",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./common/Global":"Global","./common/config":"config"}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"7696cvib0pDiY/FeDrAOUuk","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioManager=void 0;var i=function(){function t(){}return t.playAudio=function(t,e,o,i){var n=this;void 0===o&&(o=!1),void 0===i&&(i=!1),cc.loader.loadRes("audio/"+t,cc.AudioClip,function(t,r){if(t)console.error(t);else{var c=n.effectAudioID=cc.audioEngine.play(r,i,1);o&&(c=n.musicAudioID=cc.audioEngine.playMusic(r,!0)),cc.audioEngine.setFinishCallback(c,function(){e&&e()})}})},t.playBGM=function(t){this.playAudio(t,null,!0)},t.playEffect=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=!1),this.playAudio(t,e,!1,o)},t.stop=function(t){cc.audioEngine.stop(t)},t.stopMusic=function(){cc.audioEngine.stopMusic()},t.stopEffect=function(t){cc.audioEngine.stopEffect(t)},t.stopAll=function(){cc.audioEngine.stopAll()},t.stopAllEffects=function(){cc.audioEngine.stopAllEffects()},t.pause=function(t){cc.audioEngine.pause(t)},t.pauseMusic=function(){cc.audioEngine.pauseMusic()},t.pauseEffect=function(t){cc.audioEngine.pauseEffect(t)},t.pauseAll=function(){cc.audioEngine.pauseAll()},t.pauseAllEffects=function(){cc.audioEngine.pauseAllEffects()},t.resume=function(t){cc.audioEngine.resume(t)},t.resumeMusic=function(){cc.audioEngine.resumeMusic()},t.resumeEffect=function(t){cc.audioEngine.resumeEffect(t)},t.resumeAll=function(){cc.audioEngine.resumeAll()},t.resumeAllEffects=function(){cc.audioEngine.resumeAllEffects()},t.musicAudioID=-1,t.effectAudioID=-1,t}();o.AudioManager=i,cc._RF.pop()},{}],CommonCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"2ee8461eldId5I9vmHei675","CommonCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/Tools"),a=t("./common/config"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isBackGround=!1,e.maskNode=null,e.contentBg=null,e.contentBgSF=[],e.btnList=[],e.contentNodeList=[],e._data=null,e._tutorialData={},e}return n(e,t),e.prototype.onLoad=function(){window.NOTIFICATION.on(a.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.on(a.clientEvent.EnterForeground,this.EnterForeground,this),this._isBackGround=!1,this.registerEvent()},e.prototype.registerEvent=function(){window.NOTIFICATION.on(a.clientEvent.gotoStep,this.gotoStep,this),window.NOTIFICATION.on(a.clientEvent.playAnimation,this.playAnimation,this)},e.prototype.unregisterEvent=function(){window.NOTIFICATION.off(a.clientEvent.gotoStep,this.gotoStep,this),window.NOTIFICATION.off(a.clientEvent.playAnimation,this.playAnimation,this)},e.prototype.gotoStep=function(t){if(this._data=t,t.hasOwnProperty("stepType"))switch(t.stepType){case a.clientEvent.gotoCom_start:this.node.active=!0,this.showStartPage(t);break;case a.clientEvent.gotoCom_choose:this.node.active=!0,this.showChoosePage(t);break;case a.clientEvent.gotoCom_confirm:this.node.active=!0,this.showConfirmPage(t);break;case a.clientEvent.gotoPlayGame:this.node.active=!1;break;case a.clientEvent.gotoCom_pause:this.hideTutorial(),this.node.active=!0,this.showPausePage(t);break;case a.clientEvent.gotoCom_replay:this.hideTutorial(),this.node.active=!0,this.showReplayPage(t);break;case a.clientEvent.gotoCom_help:this.hideTutorial(),this.node.active=!0,this.showHelpPage(t);break;case a.clientEvent.gotoCom_settle:this.node.active=!0,this.showSettlePage(t)}},e.prototype.playAnimation=function(t){if(t.hasOwnProperty("animationType"))switch(t.animationType){case a.clientEvent.playDiceAnimation:this.node.active=!0,this.playDiceAnimation();break;case a.clientEvent.finishDiceAnimation:this.node.active=!1}},e.prototype.playDiceAnimation=function(){this.clearupAll(),this.showMask(!0)},e.prototype.showStartPage=function(){this.clearupAll(),this.showMask(!1),this.showContentBg(a.TYPE_CONTENT_BG.MIDDLE),this.showContentNode(a.TYPE_CONTENT_NODE.START),this.showButton([a.TYPE_BTN.SURE],a.TYPE_CONTENT_NODE.START)},e.prototype.showChoosePage=function(){this.clearupAll(),this.showMask(!0),this.showContentBg(a.TYPE_CONTENT_BG.BIG),this.showContentNode(a.TYPE_CONTENT_NODE.CHOOSE),this.showButton([a.TYPE_BTN.CANCEL,a.TYPE_BTN.SURE],a.TYPE_CONTENT_NODE.CHOOSE)},e.prototype.showConfirmPage=function(t){if(this.clearupAll(),this.showMask(!0),this.showContentBg(a.TYPE_CONTENT_BG.SMALL),this.showContentNode(a.TYPE_CONTENT_NODE.CONFIRM),this.showButton([a.TYPE_BTN.SURE],a.TYPE_CONTENT_NODE.CONFIRM),this.contentNodeList[a.TYPE_CONTENT_NODE.CONFIRM]){var e=this.contentNodeList[a.TYPE_CONTENT_NODE.CONFIRM].getComponent("com_confirmCtrl");e&&e.changeResult(t.data.curModel)}},e.prototype.showSettlePage=function(t){this.clearupAll(),this.showMask(!0),this.showContentNode(a.TYPE_CONTENT_NODE.SETTLE),this.showButton([a.TYPE_BTN.REPLAY],a.TYPE_CONTENT_NODE.SETTLE);var e=this.contentNodeList[a.TYPE_CONTENT_NODE.SETTLE].getComponent("com_settleCtrl");e&&e.showSettle(t)},e.prototype.showPausePage=function(){this.clearupAll(),this.showMask(!0),this.showContentBg(a.TYPE_CONTENT_BG.MIDDLE),this.showContentNode(a.TYPE_CONTENT_NODE.PAUSE),this.showButton([a.TYPE_BTN.CONTINUE])},e.prototype.showReplayPage=function(){this.clearupAll(),this.showMask(!0),this.showContentBg(a.TYPE_CONTENT_BG.MIDDLE),this.showContentNode(a.TYPE_CONTENT_NODE.REPLAY),this.showButton([a.TYPE_BTN.CANCEL,a.TYPE_BTN.SURE])},e.prototype.showHelpPage=function(){this.clearupAll(),this.showMask(!0),this.showContentBg(a.TYPE_CONTENT_BG.BIG),this.showContentNode(a.TYPE_CONTENT_NODE.HELP),this.showButton([a.TYPE_BTN.SURE],a.TYPE_CONTENT_NODE.HELP)},e.prototype.clearupAll=function(){this.maskNode.active=!1,this.contentBg.spriteFrame="";for(var t=0;t<this.btnList.length;t++)this.btnList[t]&&(this.btnList[t].node.active=!1);for(var e=0;e<this.contentNodeList.length;e++)this.contentNodeList[e]&&(this.contentNodeList[e].active=!1)},e.prototype.showMask=function(t){this.maskNode.active=t},e.prototype.showContentBg=function(t){this.contentBg.spriteFrame=this.contentBgSF[t]},e.prototype.showContentNode=function(t){this.contentNodeList[t]&&(this.contentNodeList[t].active=!0)},e.prototype.showButton=function(t,e){void 0===e&&(e=null);for(var o=0;o<t.length;o++)this.btnList[t[o]]&&(this.btnList[t[o]].node.active=!0);this.checkTutorial(t,e)},e.prototype.checkTutorial=function(t,e){var o=this;if(null!=e&&(this.initTutorialData(e),!this._tutorialData[e]||!this._tutorialData[e].tutorial)){var i=[a.TYPE_BTN.SURE,a.TYPE_BTN.REPLAY];this.scheduleOnce(function(){for(var e=0;e<t.length;e++)if(t[e]==i[0]||t[e]==i[1]){var n=o.btnList[t[e]];if(n){var r=n.node.convertToWorldSpaceAR(cc.v2(0,0));window.NOTIFICATION.emit(a.clientEvent.tutorial,{tutorialType:a.TYPE_TUTORIAL.SHOW,data:{posData:{position:r,dX:0,dY:0}}})}break}},0)}},e.prototype.initTutorialData=function(t){this._tutorialData[t]||(this._tutorialData[t]={tutorial:!1},console.log("Create new one:",this._tutorialData))},e.prototype.hideTutorial=function(t){void 0===t&&(t=null),null==t?window.NOTIFICATION.emit(a.clientEvent.tutorial,{tutorialType:a.TYPE_TUTORIAL.HIDE}):this._tutorialData[t]&&0==this._tutorialData[t].tutorial&&(this._tutorialData[t].tutorial=!0,window.NOTIFICATION.emit(a.clientEvent.tutorial,{tutorialType:a.TYPE_TUTORIAL.HIDE}))},e.prototype.onClickCancelBtn=function(){if(this._data&&this._data.hasOwnProperty("stepType"))switch(this._data.stepType){case a.clientEvent.gotoCom_replay:this.node.active=!1;break;case a.clientEvent.gotoCom_choose:window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_start})}},e.prototype.onClickContinueBtn=function(){if(this._data&&this._data.hasOwnProperty("stepType"))switch(this._data.stepType){case a.clientEvent.gotoCom_pause:this.node.active=!1}},e.prototype.onClickRePlayBtn=function(){this.hideTutorial(a.TYPE_CONTENT_NODE.SETTLE),window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_start})},e.prototype.onClickSureBtn=function(){if(this._data&&this._data.hasOwnProperty("stepType"))switch(this._data.stepType){case a.clientEvent.gotoCom_start:var t=this.contentNodeList[a.TYPE_CONTENT_NODE.START].getComponent("com_startCtrl");if(t){var e=t.getCurModel();console.log("Current mode\uff080-SINGLE  1-DOUBLE\uff09:",e);var o=!1;this._tutorialData[a.TYPE_CONTENT_NODE.HELP]&&(o=this._tutorialData[a.TYPE_CONTENT_NODE.HELP].tutorial),e==a.TYPE_START_TOGGLE.SINGLE?o?window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_confirm,data:{curModel:a.TYPE_HERO.BLUE}}):window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_help,data:{nextStepType:a.clientEvent.gotoCom_confirm,curModel:e}}):e==a.TYPE_START_TOGGLE.DOUBLE&&(o?window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_choose,data:{curModel:e}}):window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_help,data:{nextStepType:a.clientEvent.gotoCom_choose,curModel:e}}))}this.hideTutorial(a.TYPE_CONTENT_NODE.START);break;case a.clientEvent.gotoCom_choose:var i=this.contentNodeList[a.TYPE_CONTENT_NODE.CHOOSE].getComponent("com_chooseCtrl");if(i){var n=i.getCurModel();n==a.TYPE_CHOOSE_TOGGLE.RANDOM?n=c.getRandomNum(0,1):n==a.TYPE_CHOOSE_TOGGLE.RED?n=a.TYPE_HERO.RED:n==a.TYPE_CHOOSE_TOGGLE.BLUE&&(n=a.TYPE_HERO.BLUE),window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_confirm,data:{curModel:n}})}this.hideTutorial(a.TYPE_CONTENT_NODE.CHOOSE);break;case a.clientEvent.gotoCom_confirm:var r=a.TYPE_START_TOGGLE.DOUBLE;if(this.contentNodeList[a.TYPE_CONTENT_NODE.START]){var s=this.contentNodeList[a.TYPE_CONTENT_NODE.START].getComponent("com_startCtrl");s&&(r=s.getCurModel())}var l=a.TYPE_HERO.BLUE;if(this.contentNodeList[a.TYPE_CONTENT_NODE.CONFIRM]){var p=this.contentNodeList[a.TYPE_CONTENT_NODE.CONFIRM].getComponent("com_confirmCtrl");p&&(l=p.getCurModel())}window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoPlayGame,data:{curModel:r,curPriority:l}}),this.hideTutorial(a.TYPE_CONTENT_NODE.CONFIRM);break;case a.clientEvent.gotoCom_replay:this.hideTutorial(a.TYPE_CONTENT_NODE.REPLAY),window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_start});break;case a.clientEvent.gotoCom_pause:this.node.active=!1;break;case a.clientEvent.gotoCom_help:if(this.hideTutorial(a.TYPE_CONTENT_NODE.HELP),this._data&&this._data.hasOwnProperty("data")){if(this._data.data.hasOwnProperty("nextStepType")){window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent[this._data.data.nextStepType],data:this._data.data.curModel});break}break}this.node.active=!1}},e.prototype.onClickShieldBtn=function(){},e.prototype.EnterBackground=function(){this._isBackGround=!0,this.unregisterEvent()},e.prototype.EnterForeground=function(){this._isBackGround&&(this._isBackGround=!1,this.registerEvent())},e.prototype.onDestroy=function(){window.NOTIFICATION.off(a.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.off(a.clientEvent.EnterForeground,this.EnterForeground,this),this.unregisterEvent()},r([p(cc.Boolean)],e.prototype,"_isBackGround",void 0),r([p(cc.Node)],e.prototype,"maskNode",void 0),r([p(cc.Sprite)],e.prototype,"contentBg",void 0),r([p(cc.SpriteFrame)],e.prototype,"contentBgSF",void 0),r([p(cc.Button)],e.prototype,"btnList",void 0),r([p(cc.Node)],e.prototype,"contentNodeList",void 0),r([p],e.prototype,"_data",void 0),r([p],e.prototype,"_tutorialData",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./common/Tools":"Tools","./common/config":"config"}],GameCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"10994Uzw8hM5ZVHNFUH5LkZ","GameCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("gameData"),a=cc.Enum({LOW:1,HIGH:2}),s=t("./common/Global"),l=t("./common/Tools"),p=t("./common/config"),u=cc._decorator,d=u.ccclass,h=u.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animNode=null,e.gridNode=null,e._gridData={},e.flowerNode=[],e.flowerPref=null,e._flowerData={},e._ownedFlower={},e.heroPref=null,e._heroData={},e.diceNode=[],e.dicePref=[],e._diceData={},e.effectPref=null,e._isBackGround=!1,e._gameData=null,e._nextAction=null,e._tutorialTimer=null,e._diceNumber=null,e._pathList=[],e._timer=null,e}return n(e,t),e.prototype.onLoad=function(){window.NOTIFICATION.on(p.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.on(p.clientEvent.EnterForeground,this.EnterForeground,this),this._isBackGround=!1,this.registerEvent(),s.AudioManager.playBGM(p.AUDIO.MUSIC_BG),this.initData()},e.prototype.registerEvent=function(){window.NOTIFICATION.on(p.clientEvent.gotoStep,this.gotoStep,this),window.NOTIFICATION.on(p.clientEvent.playAnimation,this.playAnimation,this)},e.prototype.unregisterEvent=function(){window.NOTIFICATION.off(p.clientEvent.gotoStep,this.gotoStep,this),window.NOTIFICATION.off(p.clientEvent.playAnimation,this.playAnimation,this)},e.prototype.initData=function(){for(var t in this._gridData=new Object,c)if(Object.prototype.hasOwnProperty.call(c,t)){var e=c[t],o=this.gridNode.getChildByName("p"+t),i=new Object;i.key=t,i.data=e,i.item=o,i.position=o.getPosition(),this._gridData[t]=i}this._flowerData={},this._ownedFlower={};for(var n=0;n<2;n++){for(var r=new Object,a=this.flowerNode[n],s=0;s<a.childrenCount;s++){var l=a.getChildByName("p"+s),p=new Object;p.key=s,p.item=l,p.originalAngle=l.angle,p.position=l.getPosition(),r[s]=p}this._flowerData[n]=r,this._ownedFlower[n]=new Object}},e.prototype.gotoStep=function(t){if(this._data=t,t.hasOwnProperty("stepType"))switch(t.stepType){case p.clientEvent.gotoCom_start:this.clearupAll();break;case p.clientEvent.gotoPlayGame:this.gotoPlayGame(t)}},e.prototype.playAnimation=function(t){if(t.hasOwnProperty("animationType"))switch(t.animationType){case p.clientEvent.finishDiceAnimation:this.finishDiceAnimation();break;case p.clientEvent.finishFlyFlowerAnimation:this.finishFlyFlowerAnimation(t);break;case p.clientEvent.finishEatFlowerAnimation:this.finishEatFlowerAnimation(t)}},e.prototype.finishDiceAnimation=function(){var t=this,e=this._diceData[this._nextAction];e&&e.item&&(e.item.getComponent(cc.Button).interactable=!1,e.item.active=!0,e.ctrl.playAnimation(this._diceNumber,null,1,function(){var e=t._heroData[t._nextAction];e.ctrl.updateStatus(!1),t._pathList=t.getPath(e.curIndex,t._diceNumber),t.goSomeWhere(e)}))},e.prototype.getPath=function(t,e){for(var o=[],i=1*t+e+1,n=1*t+1;n<i;n++)Object.prototype.hasOwnProperty.call(this._gridData,n)&&o.push(this._gridData[n]);return o},e.prototype.goSomeWhere=function(t){var e=this,o=this._pathList.shift();console.log("Go to :",o),o?this._pathList.length>0?this.byWalk(t,o,function(){e.goSomeWhere(t)}):this.byWalk(t,o,function(){e.checkAgain(t,o)}):(t.item.stopAllActions(),1*t.curIndex>=Object(c).length-1?(s.AudioManager.playEffect(p.AUDIO.EFFECT_GAME_OVER),t.ctrl.playAnimation("happy")):t.ctrl.playAnimation("idle"),this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){e.nextRound()},1e3))},e.prototype.checkAgain=function(t,e){var o=this;if(e.data.Property==p.TYPE_ITEMS_PROPERTY.LADDER){console.log("The last one is LADDER.");var i=this._gridData[e.data.LinkPID];this._pathList.push(i),this.goSomeWhere(t)}else if(e.data.Property==p.TYPE_ITEMS_PROPERTY.PLANTE){console.log("The last one is PLANTE."),t.item.stopAllActions(),t.ctrl.playRedAnimation(),t.ctrl.playAnimation("happy2",null,0,function(){t.ctrl.playAnimation("idle")});var n=this._gridData[t.curIndex].item.convertToWorldSpaceAR(cc.v2(0,0)),r=this._flowerData[this._nextAction][Object.keys(this._ownedFlower[this._nextAction]).length].item.convertToWorldSpaceAR(cc.v2(0,0));this.flyFlower(t,n,r)}else if(e.data.Property==p.TYPE_ITEMS_PROPERTY.ANIMAL)console.log("The last one is ANIMAL."),s.AudioManager.playEffect(p.AUDIO.EFFECT_ANIMAL),t.item.stopAllActions(),t.ctrl.playBlueAnimation(),t.ctrl.playAnimation("nanguo2",null,0,function(){t.ctrl.playAnimation("idle")}),Object.keys(this._ownedFlower[this._nextAction]).length>0?(n=this._gridData[t.curIndex].item.convertToWorldSpaceAR(cc.v2(0,0)),r=this._ownedFlower[this._nextAction][Object.keys(this._ownedFlower[this._nextAction]).length-1].item.convertToWorldSpaceAR(cc.v2(0,0)),this.eatFlower(t,n,r)):this.goSomeWhere(t);else if(e.data.Property==p.TYPE_ITEMS_PROPERTY.BLACKHOLE){s.AudioManager.playEffect(p.AUDIO.EFFECT_FLASH);var c=this._gridData[e.data.LinkPID];this.byTP(t,c,function(){o.checkAgain(t,c)})}else console.log("The last one is OTHER."),this.goSomeWhere(t)},e.prototype.flyFlower=function(t,e,o){s.AudioManager.playEffect(p.AUDIO.EFFECT_GET_FLOWER),window.NOTIFICATION.emit(p.clientEvent.playAnimation,{animationType:p.clientEvent.flyFlowerAnimation,data:{herodata:t,fromPosition:e,toPosition:o}})},e.prototype.finishFlyFlowerAnimation=function(t){var e=this,o=this._ownedFlower[this._nextAction],i=Object.keys(o).length,n=this._flowerData[this._nextAction][i],r=n.item.convertToWorldSpaceAR(cc.v2(0,0)),c=this.animNode.convertToNodeSpaceAR(r),a=cc.instantiate(this.flowerPref);a.setPosition(c),a.angle=n.originalAngle,this.animNode.addChild(a);var s=new Object;s.item=a,o[i]=s,this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){t.data.herodata&&e.goSomeWhere(t.data.herodata)},1e3)},e.prototype.eatFlower=function(t,e,o){window.NOTIFICATION.emit(p.clientEvent.playAnimation,{animationType:p.clientEvent.eatFlowerAnimation,data:{herodata:t,fromPosition:e,toPosition:o}})},e.prototype.finishEatFlowerAnimation=function(t){var e=this;s.AudioManager.playEffect(p.AUDIO.EFFECT_EAT_FLOWER);var o=this._ownedFlower[this._nextAction][Object.keys(this._ownedFlower[this._nextAction]).length-1].item;o&&(o.stopAllActions(),o.runAction(cc.sequence(cc.blink(1,3),cc.callFunc(function(){delete e._ownedFlower[e._nextAction][Object.keys(e._ownedFlower[e._nextAction]).length-1],o.removeFromParent(),t.data.herodata&&e.goSomeWhere(t.data.herodata)}))))},e.prototype.byWalk=function(t,e,o){"walk"!=t.ctrl.getCurName()&&(t.item.stopAllActions(),t.ctrl.playAnimation("walk"));var i=this.getGridPositon(e.key,this._nextAction);t.item.zIndex=1*e.key,t.item.runAction(cc.sequence(cc.moveTo(.5,i),cc.callFunc(function(){t.item.setScale(1*e.data.Direction,1),t.curIndex=e.key,o&&o()})))},e.prototype.byTP=function(t,e,o){"idle"!=t.ctrl.getCurName()&&(t.item.stopAllActions(),t.ctrl.playAnimation("idle"));var i=this.getGridPositon(e.key,this._nextAction);t.item.zIndex=1*e.key,t.ctrl.tpGo(function(){t.item.setPosition(i),t.curIndex=e.key,t.ctrl.tpCome(1*e.data.Direction,o)})},e.prototype.gotoPlayGame=function(t){var e=this;s.AudioManager.playEffect(p.AUDIO.EFFECT_READY_GO),window.NOTIFICATION.emit(p.clientEvent.playAnimation,{animationType:p.clientEvent.playReadGoAnimation}),this._gameData=t,this.clearupAll(),this.addHero(),this.addDice(),this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){e.nextRound()},2e3)},e.prototype.addHero=function(){for(var t=0;t<2;t++){var e=!0;this._gameData.data.curModel==p.TYPE_START_TOGGLE.SINGLE&&(e=t==this.getCurPriority());var o=cc.instantiate(this.heroPref);this.animNode.addChild(o);var i=o.getComponent("hero");i.setModel(t),i.idle(p.TYPE_HERO_ANIMATIONS.IDLE),o.active=e;var n=new Object;n.key=t,n.item=o,n.ctrl=i,n.curIndex=0,n.available=e,this._heroData[t]=n,o.setPosition(this.getGridPositon(n.curIndex,t))}},e.prototype.addDice=function(){for(var t=0;t<2;t++){var e=!0;this._gameData.data.curModel==p.TYPE_START_TOGGLE.SINGLE&&(e=t==this.getCurPriority());var o=this.dicePref[t],i=this.diceNode[t],n=cc.instantiate(o);n.setPosition(i.getPosition()),this.animNode.addChild(n);var r=n.getComponent("diceCtrl");r.setParent(this),n.active=e;var c=new Object;c.key=t,c.item=n,c.ctrl=r,c.tutorial=!1,c.available=e,c.position=i.getPosition(),this._diceData[t]=c}},e.prototype.nextRound=function(){if(console.log("New round."),this.checkResult())return s.AudioManager.playEffect(p.AUDIO.EFFECT_VICTORY),void window.NOTIFICATION.emit(p.clientEvent.gotoStep,{stepType:p.clientEvent.gotoCom_settle,data:{heroData:this._heroData,flowerData:this._ownedFlower}});var t=this.getNextAction();this.updateDice(t),this.udpateHero(t);var e=this._diceData[t];e&&e.item&&(e.tutorial||this.tutorial(e,t),this.getDiceNumber(),e.item.getComponent(cc.Button).interactable=!0,e.ctrl.playAnimation("0"),s.AudioManager.playEffect(p.AUDIO.EFFECT_SHAKE_DICE,null,!0))},e.prototype.checkResult=function(){var t=!1,e=Object.keys(c).length;return this._gameData.data.curModel==p.TYPE_START_TOGGLE.SINGLE?t=this._heroData[1].curIndex==e-1:this._gameData.data.curModel==p.TYPE_START_TOGGLE.DOUBLE&&(t=this._heroData[0].curIndex==e-1&&this._heroData[1].curIndex==e-1),t},e.prototype.getGridPositon=function(t,e){var o=this._gridData[t].position;if(this.getCurModel()==p.TYPE_START_TOGGLE.SINGLE)return o;var i=e==p.TYPE_HERO.RED?this._heroData[p.TYPE_HERO.BLUE]:this._heroData[p.TYPE_HERO.RED];if(i&&i.curIndex!=t)return o;var n=cc.v2(o.x,o.y);return this._gameData.data.curModel==p.TYPE_START_TOGGLE.DOUBLE&&(n.x=e==p.TYPE_HERO.RED?n.x+50:n.x-50,n.y=e==p.TYPE_HERO.RED?n.y+5:n.y-5),n},e.prototype.getNextAction=function(){return null==this._nextAction?this._nextAction=this.getCurPriority():this.getCurModel()==p.TYPE_START_TOGGLE.DOUBLE&&(this._heroData[p.TYPE_HERO.RED].curIndex>=Object.keys(c).length-1?this._nextAction=p.TYPE_HERO.BLUE:this._heroData[p.TYPE_HERO.BLUE].curIndex>=Object.keys(c).length-1?this._nextAction=p.TYPE_HERO.RED:this._nextAction=(this._nextAction+1)%2),console.log("Who is next (0-red hero  1-blue hero):",this._nextAction),this._nextAction},e.prototype.getDiceNumber=function(){var t=window.numbers.shift();return this._diceNumber=t||l.getRandomNum(1,6),console.log("Number of steps:",this._diceNumber),this._diceNumber},e.prototype.updateDice=function(t){for(var e in this._diceData)if(Object.prototype.hasOwnProperty.call(this._diceData,e)){var o=this._diceData[e];o&&(o.item.active=o.available&&t==e)}},e.prototype.udpateHero=function(t){for(var e in this._heroData)if(Object.prototype.hasOwnProperty.call(this._heroData,e)){var o=this._heroData[e];o&&o.ctrl.updateStatus(t==e)}this._heroData[p.TYPE_HERO.RED].curIndex==this._heroData[p.TYPE_HERO.BLUE].curIndex&&(this._heroData[t].item.zIndex=1*this._heroData[t].curIndex+a.HIGH)},e.prototype.tutorial=function(t){this._tutorialTimer&&(this.unschedule(this._tutorialTimer),this._tutorialTimer=null),this._tutorialTimer=function(){var e=t.item.convertToWorldSpaceAR(cc.v2(0,0));window.NOTIFICATION.emit(p.clientEvent.tutorial,{tutorialType:p.TYPE_TUTORIAL.SHOW,data:{posData:{position:e,dX:0,dY:0}}})},this.scheduleOnce(this._tutorialTimer,p.TUTORIAL_TIME)},e.prototype.clearupAll=function(){for(var t in s.AudioManager.stopAllEffects(),this._heroData={},this._diceData={},this._nextAction=null,this.animNode.removeAllChildren(),this._ownedFlower)Object.prototype.hasOwnProperty.call(this._ownedFlower,t)&&(this._ownedFlower[t]={});for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)){if(c[t].Property!=p.TYPE_ITEMS_PROPERTY.PLANTE)continue;var e=this.gridNode.getChildByName("p"+t),o=cc.instantiate(this.effectPref),i=e.convertToWorldSpaceAR(cc.v2(0,0)),n=this.animNode.convertToNodeSpaceAR(i);o.setPosition(n),o.zIndex=1,this.animNode.addChild(o);var r=o.getComponent("baseDragon"),a=l.getRandomNum(1,50);r&&r.playAnimation("idle",a)}this._timer&&clearTimeout(this._timer),this._tutorialTimer&&this.unschedule(this._tutorialTimer)},e.prototype.onClickDiceBtn=function(t,e){s.AudioManager.stopAllEffects(),this._tutorialTimer&&(this.unschedule(this._tutorialTimer),this._tutorialTimer=null),window.NOTIFICATION.emit(p.clientEvent.tutorial,{tutorialType:p.TYPE_TUTORIAL.HIDE});var o=this._diceData[e];if(o){o.tutorial=!0,o.item.active=!1;var i=o.item.convertToWorldSpaceAR(cc.v2(0,0));window.NOTIFICATION.emit(p.clientEvent.playAnimation,{animationType:p.clientEvent.playDiceAnimation,data:{curModel:this._nextAction,diceNumber:this._diceNumber,posData:{position:i,dX:0,dY:0}}})}},e.prototype.getCurModel=function(){var t=p.TYPE_START_TOGGLE.DOUBLE;return this._gameData.hasOwnProperty("data")&&this._gameData.data.hasOwnProperty("curModel")&&(t=this._gameData.data.curModel),t},e.prototype.getCurPriority=function(){var t=p.TYPE_HERO.BLUE;return this._gameData.hasOwnProperty("data")&&this._gameData.data.hasOwnProperty("curPriority")&&(t=this._gameData.data.curPriority),t},e.prototype.EnterBackground=function(){this._isBackGround=!0,this.unregisterEvent()},e.prototype.EnterForeground=function(){this._isBackGround&&(this._isBackGround=!1,this.registerEvent())},e.prototype.onDestroy=function(){window.NOTIFICATION.off(p.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.off(p.clientEvent.EnterForeground,this.EnterForeground,this),this.unregisterEvent()},r([h(cc.Node)],e.prototype,"animNode",void 0),r([h(cc.Node)],e.prototype,"gridNode",void 0),r([h()],e.prototype,"_gridData",void 0),r([h(cc.Node)],e.prototype,"flowerNode",void 0),r([h(cc.Prefab)],e.prototype,"flowerPref",void 0),r([h()],e.prototype,"_flowerData",void 0),r([h(cc.Prefab)],e.prototype,"heroPref",void 0),r([h()],e.prototype,"_heroData",void 0),r([h(cc.Node)],e.prototype,"diceNode",void 0),r([h(cc.Prefab)],e.prototype,"dicePref",void 0),r([h()],e.prototype,"_diceData",void 0),r([h(cc.Prefab)],e.prototype,"effectPref",void 0),r([h(cc.Boolean)],e.prototype,"_isBackGround",void 0),r([h()],e.prototype,"_gameData",void 0),r([h()],e.prototype,"_nextAction",void 0),r([h()],e.prototype,"_tutorialTimer",void 0),r([h()],e.prototype,"_diceNumber",void 0),r([h()],e.prototype,"_pathList",void 0),r([d],e)}(cc.Component);o.default=_,cc._RF.pop()},{"./common/Global":"Global","./common/Tools":"Tools","./common/config":"config",gameData:"gameData"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"c1f9ekDY1hEZZMapsrXGf22","Global");var i=this&&this.__createBinding||(Object.create?function(t,e,o,i){void 0===i&&(i=o),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,i){void 0===i&&(i=o),t[i]=e[o]}),n=this&&this.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||i(e,t,o)};Object.defineProperty(o,"__esModule",{value:!0}),o.initGame=void 0,n(t("./AudioManager"),o);var r=t("./config");o.initGame=function(){var t=!0;cc.game.on(cc.game.EVENT_HIDE,function(){t&&(t=!1,window.NOTIFICATION.emit(r.clientEvent.EnterBackground))}),cc.game.on(cc.game.EVENT_SHOW,function(){t||(t=!0,window.NOTIFICATION.emit(r.clientEvent.EnterForeground))}),window.numbers=[],window.setNumbers=function(t){window.numbers=t},cc.loader.loadResDir("audio/",cc.AudioClip,function(t,e){t?console.error(t):console.log("clip:",e)})},cc._RF.pop()},{"./AudioManager":"AudioManager","./config":"config"}],MainScene:[function(t,e,o){"use strict";cc._RF.push(e,"fcee9xWxFxGebtaOa08oMdH","MainScene");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/Global"),a=t("./common/config"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isBackGround=!1,e.rootNode=null,e.gamePrefab=null,e.startPrefab=null,e.menuPrefab=null,e.commonPrefab=null,e.animationPrefab=null,e}return n(e,t),e.prototype.onLoad=function(){window.NOTIFICATION.on(a.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.on(a.clientEvent.EnterForeground,this.EnterForeground,this),this._isBackGround=!1,this.registerEvent(),c.initGame(),this.addNode()},e.prototype.addNode=function(){this.rootNode.removeAllChildren(),this.node.addChild(this.createNode(this.gamePrefab,!0)),this.node.addChild(this.createNode(this.menuPrefab,!0)),this.node.addChild(this.createNode(this.startPrefab,!0)),this.node.addChild(this.createNode(this.commonPrefab,!0)),this.node.addChild(this.createNode(this.animationPrefab,!0)),window.NOTIFICATION.emit(a.clientEvent.gotoStep,{stepType:a.clientEvent.gotoCom_start})},e.prototype.createNode=function(t,e){var o=cc.instantiate(t);return o.active=e,o},e.prototype.registerEvent=function(){},e.prototype.unregisterEvent=function(){},e.prototype.EnterBackground=function(){this._isBackGround=!0,this.unregisterEvent()},e.prototype.EnterForeground=function(){this._isBackGround&&(this._isBackGround=!1,this.registerEvent())},e.prototype.onDestroy=function(){window.NOTIFICATION.off(a.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.off(a.clientEvent.EnterForeground,this.EnterForeground,this),this.unregisterEvent()},r([p(cc.Boolean)],e.prototype,"_isBackGround",void 0),r([p(cc.Node)],e.prototype,"rootNode",void 0),r([p(cc.Prefab)],e.prototype,"gamePrefab",void 0),r([p(cc.Prefab)],e.prototype,"startPrefab",void 0),r([p(cc.Prefab)],e.prototype,"menuPrefab",void 0),r([p(cc.Prefab)],e.prototype,"commonPrefab",void 0),r([p(cc.Prefab)],e.prototype,"animationPrefab",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./common/Global":"Global","./common/config":"config"}],MenuCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"b5321fJNKNMU61L7DytPk5S","MenuCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isBackGround=!1,e}return n(e,t),e.prototype.onLoad=function(){window.NOTIFICATION.on(c.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.on(c.clientEvent.EnterForeground,this.EnterForeground,this),this._isBackGround=!1,this.registerEvent()},e.prototype.registerEvent=function(){},e.prototype.unregisterEvent=function(){},e.prototype.onClickPauseBtn=function(){window.NOTIFICATION.emit(c.clientEvent.gotoStep,{stepType:c.clientEvent.gotoCom_pause})},e.prototype.onClickRePlayBtn=function(){window.NOTIFICATION.emit(c.clientEvent.gotoStep,{stepType:c.clientEvent.gotoCom_replay})},e.prototype.onClickHelpBtn=function(){window.NOTIFICATION.emit(c.clientEvent.gotoStep,{stepType:c.clientEvent.gotoCom_help})},e.prototype.EnterBackground=function(){this._isBackGround=!0,this.unregisterEvent()},e.prototype.EnterForeground=function(){this._isBackGround&&(this._isBackGround=!1,this.registerEvent())},e.prototype.onDestroy=function(){window.NOTIFICATION.off(c.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.off(c.clientEvent.EnterForeground,this.EnterForeground,this),this.unregisterEvent()},r([l(cc.Boolean)],e.prototype,"_isBackGround",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/config":"config"}],StartCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"276d4EjnzBKCLTzcscSezYA","StartCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isBackGround=!1,e}return n(e,t),e.prototype.onLoad=function(){window.NOTIFICATION.on(c.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.on(c.clientEvent.EnterForeground,this.EnterForeground,this),this._isBackGround=!1,this.registerEvent()},e.prototype.registerEvent=function(){window.NOTIFICATION.on(c.clientEvent.gotoStep,this.gotoStep,this)},e.prototype.unregisterEvent=function(){window.NOTIFICATION.off(c.clientEvent.gotoStep,this.gotoStep,this)},e.prototype.gotoStep=function(t){if(t.hasOwnProperty("stepType"))switch(t.stepType){case c.clientEvent.gotoCom_start:this.node.active=!0;break;default:this.node.active=!1}},e.prototype.EnterBackground=function(){this._isBackGround=!0,this.unregisterEvent()},e.prototype.EnterForeground=function(){this._isBackGround&&(this._isBackGround=!1,this.registerEvent())},e.prototype.onDestroy=function(){window.NOTIFICATION.off(c.clientEvent.EnterBackground,this.EnterBackground,this),window.NOTIFICATION.off(c.clientEvent.EnterForeground,this.EnterForeground,this),this.unregisterEvent()},r([l(cc.Boolean)],e.prototype,"_isBackGround",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/config":"config"}],Tools:[function(t,e,o){"use strict";cc._RF.push(e,"ee4f5zsAuJGLp+3oUA+l2oR","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.getRandomNum=void 0,o.getRandomNum=function(t,e){return parseInt(Math.random()*(e-t+1)+t)},cc._RF.pop()},{}],baseDragon:[function(t,e,o){"use strict";cc._RF.push(e,"ff65aL0DbNL0qCDxKmfeyAC","baseDragon");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultIdle="",e._armatureDisplay=null,e._armature=null,e._callBack=null,e._curAnimName=null,e}return n(e,t),e.prototype.onLoad=function(){this._callBack=this._curAnimName=null,this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.LOOP_COMPLETE,this)},e.prototype.LOOP_COMPLETE=function(){this._callBack&&this._callBack()},e.prototype.idle=function(t,e,o){void 0===e&&(e=0),t&&(this.defaultIdle=t),""!=this.defaultIdle&&this.playAnimation(this.defaultIdle,null,e,o)},e.prototype.playAnimation=function(t,e,o,i,n){void 0===o&&(o=0),void 0===n&&(n=1),this._armatureDisplay&&(this._armatureDisplay.timeScale=n),this._curAnimName=t,e?this._armature.animation.gotoAndPlayByFrame(t,e,o):this._armature.animation.play(t,o),this._callBack=i},e.prototype.stopAnimation=function(t){var e=t||this._curAnimName;this._armature.animation.stop(e),this._curAnimName=null},e.prototype.getArmatureDisplay=function(){this._armatureDisplay},r([s(cc.String)],e.prototype,"defaultIdle",void 0),r([s()],e.prototype,"_armatureDisplay",void 0),r([s()],e.prototype,"_armature",void 0),r([s()],e.prototype,"_callBack",void 0),r([s()],e.prototype,"_curAnimName",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],com_chooseCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"ed13fq0hEFPj77NsmCaFeRh","com_chooseCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curModel=c.TYPE_CHOOSE_TOGGLE.RANDOM,e.toggleList=[],e}return n(e,t),e.prototype.onLoad=function(){this.toggleList[this._curModel]&&this.toggleList[this._curModel].check()},e.prototype.onClickToggle=function(t,e){this._curModel=e},e.prototype.getCurModel=function(){return this._curModel},r([l()],e.prototype,"_curModel",void 0),r([l(cc.Toggle)],e.prototype,"toggleList",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/config":"config"}],com_confirmCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"d466bIS/oxHTqg232F8WDCB","com_confirmCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curModel=c.TYPE_HERO.BLUE,e.luHero=null,e.luHeroSF=[],e.confirmTitle=null,e.confirmTitleSF=[],e}return n(e,t),e.prototype.changeResult=function(t){t=null!=t&&null!=t?t:c.TYPE_HERO.BLUE,this._curModel=t,this.luHero.spriteFrame=this.luHeroSF[t],this.confirmTitle.spriteFrame=this.confirmTitleSF[t]},e.prototype.getCurModel=function(){return this._curModel},r([l()],e.prototype,"_curModel",void 0),r([l(cc.Sprite)],e.prototype,"luHero",void 0),r([l(cc.SpriteFrame)],e.prototype,"luHeroSF",void 0),r([l(cc.Sprite)],e.prototype,"confirmTitle",void 0),r([l(cc.SpriteFrame)],e.prototype,"confirmTitleSF",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/config":"config"}],com_settleCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"ea30eQEqpBGxJo6UGFFtDlo","com_settleCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.victoryNode=null,e._victoryAnimCtrl=null,e.heroNode=[],e.numberLabel=[],e.layoutNode=[],e.flowerPref=null,e.groupPref=null,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.showSettle=function(t){var e=this;this.clearupAll(),this.getVictoryAnimCtrl().playAnimation("click",null,1,function(){e.getVictoryAnimCtrl().playAnimation("idle")});for(var o=t.data.flowerData,i=0;i<2;i++){var n=o[i];i==c.TYPE_HERO.RED?this.heroNode[i].active=Object.keys(n).length>=Object.keys(o[c.TYPE_HERO.BLUE]).length:this.heroNode[i].active=Object.keys(n).length>=Object.keys(o[c.TYPE_HERO.RED]).length,this.createFlower(this.layoutNode[i],n),this.numberLabel[i].string=Object.keys(n).length}Object.keys(o[c.TYPE_HERO.RED]).length==Object.keys(o[c.TYPE_HERO.BLUE]).length&&(this.heroNode[c.TYPE_HERO.RED].active=this.heroNode[c.TYPE_HERO.BLUE].active=!0)},e.prototype.createFlower=function(t,e){var o=cc.instantiate(this.groupPref);t.addChild(o);for(var i=0;i<Object.keys(e).length;i++){i>7&&(o=cc.instantiate(this.groupPref),t.addChild(o));var n=cc.instantiate(this.flowerPref);o.addChild(n)}},e.prototype.clearupAll=function(){for(var t=0;t<2;t++)this.heroNode[t]&&(this.heroNode[t].active=!1),this.numberLabel[t]&&(this.numberLabel[t].string=""),this.layoutNode[t]&&this.layoutNode[t].removeAllChildren()},e.prototype.getVictoryAnimCtrl=function(){return this._victoryAnimCtrl||(this._victoryAnimCtrl=this.victoryNode.getComponent("baseDragon")),this._victoryAnimCtrl},r([l(cc.Node)],e.prototype,"victoryNode",void 0),r([l()],e.prototype,"_victoryAnimCtrl",void 0),r([l(cc.Node)],e.prototype,"heroNode",void 0),r([l(cc.Label)],e.prototype,"numberLabel",void 0),r([l(cc.Node)],e.prototype,"layoutNode",void 0),r([l(cc.Prefab)],e.prototype,"flowerPref",void 0),r([l(cc.Prefab)],e.prototype,"groupPref",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/config":"config"}],com_startCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"5458dXHumpI66OOM8XSYXK4","com_startCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curModel=c.TYPE_START_TOGGLE.DOUBLE,e.toggleList=[],e}return n(e,t),e.prototype.onLoad=function(){this.toggleList[this._curModel]&&this.toggleList[this._curModel].check()},e.prototype.onClickToggle=function(t,e){this._curModel=e},e.prototype.getCurModel=function(){return this._curModel},r([l()],e.prototype,"_curModel",void 0),r([l(cc.Toggle)],e.prototype,"toggleList",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/config":"config"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"0606eLafNdDBrc4KbV4Qz72","config"),Object.defineProperty(o,"__esModule",{value:!0}),o.AUDIO=o.TUTORIAL_TIME=o.TYPE_TP=o.TYPE_TUTORIAL=o.TYPE_HERO_ANIMATIONS=o.TYPE_ITEMS_PROPERTY=o.TYPE_HERO=o.TYPE_CHOOSE_TOGGLE=o.TYPE_START_TOGGLE=o.TYPE_CONTENT_NODE=o.TYPE_CONTENT_BG=o.TYPE_BTN=o.clientEvent=void 0,o.clientEvent={EnterBackground:"EnterBackground",EnterForeground:"EnterForeground",gotoStep:"gotoStep",gotoPlayGame:"gotoPlayGame",gotoCom_start:"gotoCom_start",gotoCom_choose:"gotoCom_choose",gotoCom_confirm:"gotoCom_confirm",gotoCom_pause:"gotoCom_pause",gotoCom_replay:"gotoCom_replay",gotoCom_help:"gotoCom_help",gotoCom_settle:"gotoCom_settle",playAnimation:"playAnimation",finishDiceAnimation:"finishDiceAnimation",playDiceAnimation:"playDiceAnimation",flyFlowerAnimation:"flyFlowerAnimation",finishFlyFlowerAnimation:"finishFlyFlowerAnimation",eatFlowerAnimation:"eatFlowerAnimation",finishEatFlowerAnimation:"finishEatFlowerAnimation",playReadGoAnimation:"playReadGoAnimation",tutorial:"tutorial"},function(t){t[t.CANCEL=0]="CANCEL",t[t.CONTINUE=1]="CONTINUE",t[t.REPLAY=2]="REPLAY",t[t.SURE=3]="SURE"}(o.TYPE_BTN||(o.TYPE_BTN={})),function(t){t[t.SMALL=0]="SMALL",t[t.MIDDLE=1]="MIDDLE",t[t.BIG=2]="BIG"}(o.TYPE_CONTENT_BG||(o.TYPE_CONTENT_BG={})),function(t){t[t.START=0]="START",t[t.CHOOSE=1]="CHOOSE",t[t.CONFIRM=2]="CONFIRM",t[t.PAUSE=3]="PAUSE",t[t.REPLAY=4]="REPLAY",t[t.HELP=5]="HELP",t[t.SETTLE=6]="SETTLE"}(o.TYPE_CONTENT_NODE||(o.TYPE_CONTENT_NODE={})),function(t){t[t.SINGLE=0]="SINGLE",t[t.DOUBLE=1]="DOUBLE"}(o.TYPE_START_TOGGLE||(o.TYPE_START_TOGGLE={})),function(t){t[t.RANDOM=0]="RANDOM",t[t.RED=1]="RED",t[t.BLUE=2]="BLUE"}(o.TYPE_CHOOSE_TOGGLE||(o.TYPE_CHOOSE_TOGGLE={})),function(t){t[t.RED=0]="RED",t[t.BLUE=1]="BLUE"}(o.TYPE_HERO||(o.TYPE_HERO={})),function(t){t[t.EMPTY=0]="EMPTY",t[t.LADDER=1]="LADDER",t[t.ANIMAL=2]="ANIMAL",t[t.BLACKHOLE=3]="BLACKHOLE",t[t.SPECIAL=4]="SPECIAL",t[t.PLANTE=5]="PLANTE"}(o.TYPE_ITEMS_PROPERTY||(o.TYPE_ITEMS_PROPERTY={})),function(t){t.IDLE="idle",t.HAPPY="happy",t.HAPPY2="happy2",t.NANGUO1="nanguo1",t.WALK="walk"}(o.TYPE_HERO_ANIMATIONS||(o.TYPE_HERO_ANIMATIONS={})),function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(o.TYPE_TUTORIAL||(o.TYPE_TUTORIAL={})),function(t){t[t.GO=0]="GO",t[t.COME=1]="COME"}(o.TYPE_TP||(o.TYPE_TP={})),o.TUTORIAL_TIME=5,o.AUDIO={MUSIC_BG:"muc_bg",EFFECT_ANIMAL:"eff_animal",EFFECT_EAT_FLOWER:"eff_eatFlower",EFFECT_FLASH:"eff_flash",EFFECT_FLY_DICE:"eff_flyDice",EFFECT_GAME_OVER:"eff_gameOver",EFFECT_GET_FLOWER:"eff_getFlower",EFFECT_POP:"eff_pop",EFFECT_SHAKE_DICE:"eff_shakeDice",EFFECT_VICTORY:"eff_victory",EFFECT_WALK:"eff_walk",EFFECT_READY_GO:"eff_readyGo"},cc._RF.pop()},{}],diceCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"51c570CPaVKJaaSCqmAzEOQ","diceCtrl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/config"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curModel=c.TYPE_HERO.BLUE,e.animNode=null,e._animCtrl=null,e._parentCtrl=null,e}return n(e,t),e.prototype.onLoad=function(){this._animCtrl=this.getAnimCtrl()},e.prototype.setParent=function(t){this._parentCtrl=t},e.prototype.onClickDiceBtn=function(t){this._parentCtrl&&this._parentCtrl.onClickDiceBtn(t,this.curModel)},e.prototype.setModule=function(t){this.curModel=t},e.prototype.getModule=function(){return this.curModel},e.prototype.idle=function(t,e,o){this.getAnimCtrl().idle(this.getAnimName(t),e,o)},e.prototype.playAnimation=function(t,e,o,i,n){this.getAnimCtrl().playAnimation(this.getAnimName(t),e,o,i,n)},e.prototype.stopAnimation=function(t){this.getAnimCtrl().stopAnimation(this.getAnimName(t))},e.prototype.getAnimName=function(t){return(this.curModel==c.TYPE_HERO.RED?"read":"blue")+t},e.prototype.getAnimCtrl=function(){return this._animCtrl||(this._animCtrl=this.animNode.getComponent("baseDragon")),this._animCtrl},r([l()],e.prototype,"curModel",void 0),r([l(cc.Node)],e.prototype,"animNode",void 0),r([l()],e.prototype,"_animCtrl",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/config":"config"}],gameData:[function(t,e){"use strict";cc._RF.push(e,"61194Mn9D1PX7qiJbmPxcPG","gameData");var o=[];o[0]={PID:"0",Type:"start",Name:"\u5f00\u59cb",Property:"4",LinkPID:"",Direction:"1"},o[1]={PID:"1",Type:"hh",Name:"\u8377\u82b1",Property:"0",LinkPID:"",Direction:"1"},o[2]={PID:"2",Type:"slh",Name:"\u77f3\u69b4\u82b1",Property:"5",LinkPID:"",Direction:"1"},o[3]={PID:"3",Type:"bhh",Name:"\u767e\u5408\u82b1",Property:"0",LinkPID:"",Direction:"1"},o[4]={PID:"4",Type:"xrk",Name:"\u5411\u65e5\u8475",Property:"1",LinkPID:"6",Direction:"1"},o[5]={PID:"5",Type:"mdh",Name:"\u7261\u4e39\u82b1",Property:"0",LinkPID:"",Direction:"1"},o[6]={PID:"6",Type:"slh",Name:"\u77f3\u69b4\u82b1",Property:"5",LinkPID:"",Direction:"-1"},o[7]={PID:"7",Type:"cz",Name:"\u866b\u5b50",Property:"2",LinkPID:"",Direction:"-1"},o[8]={PID:"8",Type:"xrk",Name:"\u5411\u65e5\u8475",Property:"1",LinkPID:"12",Direction:"-1"},o[9]={PID:"9",Type:"bhh",Name:"\u767e\u5408\u82b1",Property:"0",LinkPID:"",Direction:"-1"},o[10]={PID:"10",Type:"xrk",Name:"\u5411\u65e5\u8475",Property:"0",LinkPID:"",Direction:"-1"},o[11]={PID:"11",Type:"hd",Name:"\u9ed1\u6d1e",Property:"3",LinkPID:"20",Direction:"1"},o[12]={PID:"12",Type:"slh",Name:"\u77f3\u69b4\u82b1",Property:"5",LinkPID:"",Direction:"1"},o[13]={PID:"13",Type:"hd",Name:"\u9ed1\u6d1e",Property:"3",LinkPID:"18",Direction:"1"},o[14]={PID:"14",Type:"hh",Name:"\u8377\u82b1",Property:"0",LinkPID:"",Direction:"1"},o[15]={PID:"15",Type:"slh",Name:"\u77f3\u69b4\u82b1",Property:"5",LinkPID:"",Direction:"1"},o[16]={PID:"16",Type:"mdh",Name:"\u7261\u4e39\u82b1",Property:"0",LinkPID:"",Direction:"-1"},o[17]={PID:"17",Type:"hd",Name:"\u9ed1\u6d1e",Property:"3",LinkPID:"15",Direction:"-1"},o[18]={PID:"18",Type:"slh",Name:"\u77f3\u69b4\u82b1",Property:"5",LinkPID:"",Direction:"-1"},o[19]={PID:"19",Type:"cz",Name:"\u866b\u5b50",Property:"2",LinkPID:"",Direction:"-1"},o[20]={PID:"20",Type:"slh",Name:"\u77f3\u69b4\u82b1",Property:"5",LinkPID:"",Direction:"-1"},o[21]={PID:"21",Type:"end",Name:"\u7ed3\u675f",Property:"4",LinkPID:"",Direction:"-1"},e.exports=o,cc._RF.pop()},{}],hero:[function(t,e,o){"use strict";cc._RF.push(e,"879beycUP5Fwpk0zD0/TvsX","hero");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./common/Global"),a=t("./common/config"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrowAnimNode=null,e.redAnimNode=null,e.blueAnimNode=null,e._redAnimCtrl=null,e._blueAnimCtrl=null,e.circleAnimNode=null,e.animNode=null,e._animCtrl=null,e.tpAnimNode=null,e._tpAnimCtrl=null,e._curModel=null,e._curName="",e}return n(e,t),e.prototype.onLoad=function(){this._curName="",this._animCtrl=this.getLuAnimCtrl();var t=this.animNode.getComponent(dragonBones.ArmatureDisplay);if(t)try{t.addEventListener(dragonBones.EventObject.FRAME_EVENT,function(t){t&&"walk"==t.name&&c.AudioManager.playEffect(a.AUDIO.EFFECT_WALK)},this)}catch(e){console.error("ERROR:",e)}this.clearupAll()},e.prototype.setModel=function(t){this._curModel=t},e.prototype.getModel=function(){return this._curModel},e.prototype.updateStatus=function(t){this.tpAnimNode.active=!1,this.arrowAnimNode.active=t,this.circleAnimNode.active=t},e.prototype.idle=function(t,e,o){this.getLuAnimCtrl().idle(this.getAnimName(t),e,o)},e.prototype.tpGo=function(t){var e=this;this.tpAnimNode.active=!0,this.getTpAnimCtrl().playAnimation("idle",null,1,function(){e.getTpAnimCtrl().stopAnimation("idle"),e.tpAnimNode.active=!1}),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.1,1,1),cc.scaleTo(.2,0,1),cc.callFunc(function(){t&&t()})))},e.prototype.tpCome=function(t,e){var o=this;void 0===t&&(t=1),this.tpAnimNode.active=!0,this.getTpAnimCtrl().playAnimation("idle",null,1,function(){o.getTpAnimCtrl().stopAnimation("idle"),o.tpAnimNode.active=!1}),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.1,0,1),cc.scaleTo(.2,t,1),cc.callFunc(function(){e&&e()})))},e.prototype.playAnimation=function(t,e,o,i,n){this._curName=t,this.getLuAnimCtrl().playAnimation(this.getAnimName(t),e,o,i,n)},e.prototype.playRedAnimation=function(){var t=this;this.redAnimNode.active=!0,this.getRedAnimCtrl().playAnimation("01",null,1,function(){t.getRedAnimCtrl().stopAnimation("01"),t.redAnimNode.active=!1})},e.prototype.playBlueAnimation=function(){var t=this;this.blueAnimNode.active=!0,this.getBlueAnimCtrl().playAnimation("01",null,1,function(){t.getBlueAnimCtrl().stopAnimation("01"),t.blueAnimNode.active=!1})},e.prototype.stopAnimation=function(t){this._curName="",this.getLuAnimCtrl().stopAnimation(this.getAnimName(t))},e.prototype.getAnimName=function(t){return t+(this._curModel==a.TYPE_HERO.RED?"_red":"_blue")},e.prototype.getLuAnimCtrl=function(){return this._animCtrl||(this._animCtrl=this.animNode.getComponent("baseDragon")),this._animCtrl},e.prototype.getTpAnimCtrl=function(){return this._tpAnimCtrl||(this._tpAnimCtrl=this.tpAnimNode.getComponent("baseDragon")),this._tpAnimCtrl},e.prototype.getRedAnimCtrl=function(){return this._redAnimCtrl||(this._redAnimCtrl=this.redAnimNode.getComponent("baseDragon")),this._redAnimCtrl},e.prototype.getBlueAnimCtrl=function(){return this._blueAnimCtrl||(this._blueAnimCtrl=this.blueAnimNode.getComponent("baseDragon")),this._blueAnimCtrl},e.prototype.getCurName=function(){return this._curName},e.prototype.clearupAll=function(){this.circleAnimNode.active=this.arrowAnimNode.active=this.redAnimNode.active=this.blueAnimNode.active=this.tpAnimNode.active=!1},r([p(cc.Node)],e.prototype,"arrowAnimNode",void 0),r([p(cc.Node)],e.prototype,"redAnimNode",void 0),r([p(cc.Node)],e.prototype,"blueAnimNode",void 0),r([p()],e.prototype,"_redAnimCtrl",void 0),r([p(cc.Node)],e.prototype,"circleAnimNode",void 0),r([p(cc.Node)],e.prototype,"animNode",void 0),r([p()],e.prototype,"_animCtrl",void 0),r([p(cc.Node)],e.prototype,"tpAnimNode",void 0),r([p()],e.prototype,"_tpAnimCtrl",void 0),r([p()],e.prototype,"_curModel",void 0),r([p()],e.prototype,"_curName",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./common/Global":"Global","./common/config":"config"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"057afAyA5JJGr6nrjpmLp/w","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","AnimationCtrl","CommonCtrl","GameCtrl","MainScene","MenuCtrl","StartCtrl","com_chooseCtrl","com_confirmCtrl","com_settleCtrl","com_startCtrl","AudioManager","Global","Tools","baseDragon","config","gameData","diceCtrl","hero"]);
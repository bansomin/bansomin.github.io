__require=function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+s+"'")}var r=n[s]={exports:{}};t[s][0].call(r.exports,function(e){var n=t[s][1][e];return i(n||e)},r,r.exports,e,t,n,o)}return n[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"41f59nb73dF45faTBmiQ7im","GameManager");var o=e("MusicManager");cc.Class({extends:cc.Component,properties:{},onLoad:function(){Global.musicManager=new o},start:function(){}}),cc._RF.pop()},{MusicManager:"MusicManager"}],MusicManager:[function(e,t,n){"use strict";cc._RF.push(t,"fade7rI2u5P3p32mjnLejqG","MusicManager");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},playEffect:function(e,t,n){1!=n&&n||null==Global.audioID||cc.audioEngine.stopEffect(Global.audioID),cc.loader.loadRes("Sound/"+e,function(e,n){Global.audioID=cc.audioEngine.playEffect(n),cc.audioEngine.setFinishCallback(Global.audioID,function(){t&&t()})})},stopEffect:function(){cc.audioEngine.stopAllEffects()},playRightEffect:function(e){this.playEffect("success")},playErrEffect:function(e){this.playEffect("err")},playBgMusic:function(){cc.loader.loadRes("Sound/bgm",function(e,t){Global.bgMusicId=cc.audioEngine.playMusic(t,!0,1)})},pauseBgMusic:function(){cc.audioEngine.pauseMusic()},resumeBgMusic:function(){cc.audioEngine.resumeMusic()},setBgMusicVolume:function(e){cc.audioEngine.setEffectsVolume(e)}});cc._RF.pop()},{}],UITools:[function(e,t,n){"use strict";cc._RF.push(t,"8884eXiUwVOdJ5WFpVA46Vo","UITools");t.exports={onInstantiate:function(e,t,n,o){if(null==o&&(o=!0),null!=e){var i=cc.instantiate(e);return i.active=o,null!=t&&(i.parent=t),null!=n&&(i.position=n),i}},onGetNodeCompontent:function(e,t){if(null!=e){var n=e.getComponent(t);return null==n?null:n}},setSpriteImg:function(e,t){null!=e&&cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.spriteFrame=n})},getRandomNum:function(e,t){return parseInt(Math.random()*(t-e+1)+e)},getRandomArray:function(e){for(var t=[],n=0;n<e;n++)t.push(n);for(var o=0;o<t.length;o++){var i=parseInt(Math.random()*t.length),c=t[i];t[i]=t[o],t[o]=c}return t},getChildByName:function(e,t){if(null!=e){var n=e.getChildByName(t);return null==n?null:n}},randomSort:function(){return Math.random()>.5?-1:1}},cc._RF.pop()},{}],VideoPlayerCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"22e97RIp9VEPqTKjuSQ/wPU","VideoPlayerCtrl");e("module");var o=e("websocket"),i=e("connect"),c=e("gameConfig");cc.Class({extends:cc.Component,properties:{videos:{default:[],type:cc.Asset},videoPlayer:{type:cc.VideoPlayer,default:[]}},onLoad:function(){switch(o.dataEventHandler=this.node,this._mask=this.node.parent.getChildByName("mask"),cc.log(Global.tiaozhuanlogo),"teacher"!==i._name&&(this._mask.active=!0),1==Global.playMusic&&Global.musicManager.pauseBgMusic(),Global.gamePage=1,this.finishTime=null,Global.tiaozhuanlogo){case 1:Global.tiaozhuanlogo=Global.tiaozhuanlogo-1,this.node.getComponent(cc.VideoPlayer).currentTime=0,this.finishTime=43;break;case 2:Global.tiaozhuanlogo=Global.tiaozhuanlogo-1,this.node.getComponent(cc.VideoPlayer).currentTime=44,this.finishTime=67;break;case 3:Global.tiaozhuanlogo=Global.tiaozhuanlogo-1,this.node.getComponent(cc.VideoPlayer).currentTime=68,this.finishTime=88;break;case 4:Global.tiaozhuanlogo=Global.tiaozhuanlogo-1,this.node.getComponent(cc.VideoPlayer).currentTime=89,this.finishTime=97;break;case 5:Global.tiaozhuanlogo=Global.tiaozhuanlogo-1,this.node.getComponent(cc.VideoPlayer).currentTime=98,this.finishTime=121;break;case 6:Global.tiaozhuanlogo=Global.tiaozhuanlogo-1,this.node.getComponent(cc.VideoPlayer).currentTime=122;break;default:Global.tiaozhuanlogo=Global.tiaozhuanlogo-1,this.node.getComponent(cc.VideoPlayer).currentTime=0}this.initEventHandler()},start:function(){try{this.node.getComponent(cc.VideoPlayer).play(),console.log("videoPlay97")}catch(e){console.log("video",e)}},onVideoPlayerEvent:function(e,t){if(t===cc.VideoPlayer.EventType.META_LOADED);else if(t===cc.VideoPlayer.EventType.CLICKED){if("teacher"!==i._name)return;if(9!=Global.tiaozhuanlogo){cc.log(Global.tiaozhuanlogo);var n="course"+(s=Global.tiaozhuanlogo+1);cc.director.loadScene(n,function(){i.pageNum=s+""});var o={type:"next",msg:{sence:Global.tiaozhuanlogo}};i.isSave=c.SERVER_SAVE.CLEAR,i.json_string(o),1==Global.playMusic&&Global.musicManager.resumeBgMusic()}}else if(t===cc.VideoPlayer.EventType.COMPLETED&&9!=Global.tiaozhuanlogo){cc.log(Global.tiaozhuanlogo);var s;n="course"+(s=Global.tiaozhuanlogo+1);i.isSave=c.SERVER_SAVE.SAVE,cc.director.loadScene(n,function(){i.pageNum=s+""}),1==Global.playMusic&&Global.musicManager.resumeBgMusic()}},update:function(){if(null!=this.finishTime){var e=this.node.getComponent(cc.VideoPlayer).currentTime;this.finishTime<=e&&this.onVideoPlayerEvent(null,cc.VideoPlayer.EventType.COMPLETED)}},nextbtn:function(e){var t=Global.tiaozhuanlogo+1;window.currentData=[];var n="course"+t;cc.director.loadScene(n,function(){})},initEventHandler:function(){this.node.on("next",function(){this.nextbtn()}.bind(this)),this.node.on("tog_scene",function(e){window.index1=0;e=e.detail;cc.director.loadScene(e.scene_name)})}}),cc._RF.pop()},{connect:"connect",gameConfig:"gameConfig",module:void 0,websocket:"websocket"}],annimalJS:[function(e,t,n){"use strict";cc._RF.push(t,"cdbb3N8Mc5NpIthnzeo9NsO","annimalJS");var o=e("UITools");cc.Class({extends:cc.Component,properties:{chuizi:cc.Node,annimalSp:cc.Sprite},onLoad:function(){this.Sp=[],this.isSure=!1},start:function(){},setannimalData:function(e){this.Sp=e},setSp:function(){var e=this.Sp[0];o.setSpriteImg(this.annimalSp,e)},chuiziAct:function(){var e=this.Sp[1];o.setSpriteImg(this.annimalSp,e),this.isSure=!0}}),cc._RF.pop()},{UITools:"UITools"}],connect:[function(e,t,n){"use strict";cc._RF.push(t,"f2d122OPx1Lw6pf6PoIR5oe","connect");var o=e("websocket"),i={_name:"",_isPermited:!1,_params:{},pageNum:"",isSave:"",isSync:!1,isOperate:!1,init:function(){console.log("18&&&&&&&&&&&&&&connect"),console.log(this),this._isPermited=!0,this._params=this.split_href(),"0"===this._params.user_type?this._name="student":"1"===this._params.user_type?this._name="teacher":"2"===this._params.user_type&&(this._name="assistant"),this.create_connect()},split_href:function(){var e={},t=window.location.href+"";console.log("window.location.href=",t);for(var n=t.indexOf("?"),o=t.substr(n+1).split("&"),i=0;i<o.length;++i){var c=o[i].split("=");e[c[0]]=c[1]}return e},create_connect:function(){var e=["wss://www.coolmath.cn/webSocket/","wss://www.coolmath.cn/webSocket2/"],t="https://www.coolmath.cn/hdkj-xxcs/xc?leId="+this._params.lesson_id;o.isSuccess||(console.log("connect"),"assistant"!==this._name&&o.init(e[0]+this._params.user_number+","+this._params.user_type+","+this._params.lesson_id,function(e){console.log("100&&&&&&&&&&&&&&",e),"open"===e&&(console.log("61&&&&&&&&&this._name=",this._name),"teacher"===this._name&&(o._clientSockets.teacher=o.ws),"student"===this._name&&this.timedGetText(t,1e3,function(e){console.log("59data=========",e),window.currentData=[];for(var t=e.substr(3,e.length-5).split("}, {"),n=0;n<t.length;++n){var o="{"+t[n]+"}",i=JSON.parse(o);window.currentData.push(i)}cc.director.loadScene("course"+e[0],function(){this.isSync=!0}.bind(this)),console.log("json=",window.currentData)}.bind(this))),this.connect_student()}.bind(this)),"assistant"===this._name&&o.init(e[1]+this._params.user_id+","+this._params.user_type+","+this._params.lesson_id+","+this._params.student_id))},connect_student:function(){"student"===this._name&&o.init("wss://www.coolmath.cn/webSocket2/"+this._params.user_number+","+this._params.user_type+","+this._params.lesson_id,function(e){console.log("100&&&&&&&&&&&&&&",e),"open"===e&&(o._clientSockets.students=o.ws)})},json_string:function(e){var t;console.log("93&&&&&&&&&&&&&&",e),console.log("93&&&&&&&&&&&&&&scene=",cc.director.getScene().name),t={message:""+(e=JSON.stringify(e))},"teacher"===this._name?t.lessionId=this._params.lesson_id:"student"!==this._name||this._isPermited&&!window._isfresh||(t.student_id=this._params.user_number),t.pageNum=this.pageNum,t.isSave=this.isSave,t=JSON.stringify(t),cc.log("data======================="+t),this.send_msg(t)},send_msg:function(e){"teacher"===this._name&&this._isPermited?(console.log("563^^^^&&&&&&&&&&"),o.send_data(o._clientSockets.teacher,e)):this._isPermited&&!window._isfresh||"teacher"===this._name||"assistant"===this._name||o.send_data(o._clientSockets.students,e)},timedGetText:function(e,t,n){console.log("144&&&&&&&&&");var o=cc.loader.getXMLHttpRequest(),i=!1,c=setTimeout(function(){console.log("144&&&&&&&&&"),i=!0,o.abort()},t);o.onreadystatechange=function(){4===o.readyState&&(i||(clearTimeout(c),200===o.status&&(console.log("144&&&&&&&&&"),console.log("9999999"),n(o.responseText))))},o.open("GET",e),o.send(null)}};t.exports=i,cc._RF.pop()},{websocket:"websocket"}],course0:[function(e,t,n){"use strict";cc._RF.push(t,"ff30b3/GRFBDbESsMuThxbp","course0");var o=e("connect"),i=e("websocket"),c=e("gameConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){o.pageNum="0",o.isSave=c.SERVER_SAVE.CLRAR,i.dataEventHandler=this.node,o.init();var e=this.node.getChildByName("mask");o._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),cc.find("staticNode").getComponent("staticNodeJS").isShow(!1),this.node.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),this.initEventHandler()},start:function(){},onclicClear:function(){o.isSave=c.SERVER_SAVE.CLRAR;o.json_string({type:"clear"})},touch_start:function(e){if(cc.director.loadScene("video1scene",function(){}),o.isOperate=!0,e){var t={type:c.EventType.INDEX};o.pageNum="0",o.isSave=c.SERVER_SAVE.JUMP,o.json_string(t)}},initEventHandler:function(){this.node.on(c.EventType.INDEX,function(){this.touch_start()}.bind(this))}}),cc._RF.pop()},{connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],course1:[function(e,t,n){"use strict";cc._RF.push(t,"dc57fFyMqNB6aXrqpQHL9BV","course1");var o=e("websocket"),i=e("connect"),c=e("gameConfig"),s=e("UITools"),a=(e("imgPath"),cc.Enum({kele:"Img/course1/kele.png",hanbao:"Img/course1/hanbao.png",pop:"Img/course1/pop.png",shutiao:"Img/course1/shutiao.png"}));cc.Class({extends:cc.Component,properties:{btnList:[cc.Node],smallFood:[cc.Node]},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=1,this.initEventHandler(),1==Global.gamePage?this.arr=[0,2,3,1]:this.arr=[1,3,2,0],this.sureFood=[],this.init()},start:function(){},onClickNumBtn:function(e,t){var n=parseInt(t),o=this.arr[n];this.onclickSmallFood(null,o)},onclickSmallFood:function(e,t){if(1!=Global.isAction){var n=parseInt(t);this.sureFood.push(n);var o=null,i=this,c=cc.callFunc(function(){var e=i.arr.indexOf(n),t=i.btnList[e].getChildByName("food");t.isSure=!0,t.runAction(cc.fadeIn(.1))});o=0!=n?this.smallFood[n-1]:this.smallFood[3];var s=cc.spawn(cc.moveTo(1,cc.p(751,22)),cc.scaleTo(1,1.5));Global.musicManager.playEffect("move"),o.runAction(cc.sequence(s,cc.scaleTo(1,.6),cc.fadeOut(0),c))}},reShowFood:function(){for(var e=this,t=function(t){var n=e.btnList[t].getChildByName("food");if(n.isSure&&1==n.isSure)return"continue";Global.isAction=!0,n.runAction(cc.fadeIn(.3));var o=cc.callFunc(function(){Global.isAction=!1});setTimeout(function(){n.runAction(cc.sequence(cc.fadeOut(.3),o))},3e3)},n=0;n<this.btnList.length;n++)t(n)},init:function(){for(var e=this,t=[a.kele,a.hanbao,a.pop,a.shutiao],n=function(n){var o=new cc.Node;o.name="food";var i=o.addComponent(cc.Sprite);s.setSpriteImg(i,t[e.arr[n]]),o.opacity=0,e.btnList[n].addChild(o),Global.isAction=!0,o.runAction(cc.fadeIn(1));var c=e;setTimeout(function(){c.foodFadeOut()},3e3)},o=0;o<4;o++)n(o);this.smallFoodShow()},foodFadeOut:function(){for(var e=0;e<this.btnList.length;e++){var t=this.btnList[e].getChildByName("food"),n=cc.callFunc(function(){Global.isAction=!1});t.runAction(cc.sequence(cc.fadeOut(.3),n))}},smallFoodShow:function(){var e=cc.moveTo(1,cc.v2(0,303)),t=cc.moveTo(.8,cc.v2(0,121)),n=cc.moveTo(.6,cc.v2(0,-67.5)),o=cc.moveTo(.4,cc.v2(0,-279));this.smallFood[0].runAction(e),this.smallFood[1].runAction(t),this.smallFood[2].runAction(n),this.smallFood[3].runAction(o)},closeBtn:function(e){if(1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(t){var n=t.detail;e.others.getComponent("staticNodeJS").nextBtn(null,n)}.bind(this)),this.node.on("pre",function(t){var n=t.detail;e.others.getComponent("staticNodeJS").preBtn(null,n)}.bind(this)),this.node.on("fresh",function(t){var n=t.detail;e.others.getComponent("staticNodeJS").freshBtn(null,n)}.bind(this)),this.node.on("clickBtn",function(){e.onclickBtn()})}});cc._RF.pop()},{UITools:"UITools",connect:"connect",gameConfig:"gameConfig",imgPath:"imgPath",websocket:"websocket"}],course2:[function(e,t,n){"use strict";cc._RF.push(t,"d249cUOeZ9D4Z2IC8XTaAjT","course2");var o=e("websocket"),i=e("connect"),c=e("gameConfig"),s=e("UITools"),a=(e("imgPath"),cc.Enum({page1:"Img/course2/bg1.png",page2:"Img/course2/bg2.png"})),l=cc.Enum({page1:"Img/course2/blueSelect.png",page2:"Img/course2/yellowSelect.png",page3:"Img/course2/greenSelect.png"});cc.Class({extends:cc.Component,properties:{allGezi:[cc.Node],bg:cc.Node},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=2,this.initEventHandler(),this.selectArr=[],this.setCommonArr(),this.init()},start:function(){},setCommonArr:function(){switch(Global.gamePage){case 1:this.selectArr=[0,1,0,1,0,0,0,0,1];break;case 2:this.selectArr=[1,0,0,0,1,0,0,0,1];break;case 3:this.selectArr=[0,0,0,0,1,0,1,0,1];break;case 4:this.selectArr=[0,0,1,1,1,0,0,1,0];break;case 5:this.selectArr=[0,1,0,0,1,0,1,0,1];break;case 6:this.selectArr=[0,1,0,1,1,0,1,0,0]}},init:function(){this.changeGezi()},getBgUrl:function(){var e=null;switch(Global.gamePage){case 1:e=a.page1;break;case 2:case 3:case 4:case 5:case 6:e=a.page2}return e},getgeziURL:function(){var e=null;switch(Global.gamePage){case 1:e=l.page1;break;case 2:case 5:e=l.page2;break;case 3:case 4:case 6:e=l.page3}return e},changeGezi:function(){var e=this,t=this.bg.getComponent(cc.Sprite),n=this.getBgUrl();s.setSpriteImg(t,n);for(var o=null,i=0;i<this.selectArr.length;i++){1==this.selectArr[i]&&function(){var t=e.allGezi[i],n=t.getComponent(cc.Sprite);null==o&&(o=e.getgeziURL()),s.setSpriteImg(n,o),Global.isAction=!0,t.runAction(cc.fadeIn(.5));var c=e;setTimeout(function(){c.boxFadeout()},3e3)}()}},boxFadeout:function(){for(var e=0;e<this.allGezi.length;e++){var t=cc.callFunc(function(){Global.isAction=!1});this.allGezi[e].runAction(cc.sequence(cc.fadeOut(.5),t))}},onClickBox:function(e,t){if(1!=Global.isAction){var n=parseInt(t);if(1==this.selectArr[n]){Global.musicManager.playRightEffect();var o=this.allGezi[n];o.isSure=!0,o.runAction(cc.fadeIn(.5))}else Global.musicManager.playErrEffect()}},onClickReshow:function(){for(var e=this,t=function(t){var n=e.allGezi[t];if(0==e.selectArr[t]||n.isSure&&1==n.isSure)return"continue";Global.isAction=!0,n.runAction(cc.fadeIn(.5));var o=cc.callFunc(function(){Global.isAction=!1});setTimeout(function(){n.runAction(cc.sequence(cc.fadeOut(.5),o))},3e3)},n=0;n<this.allGezi.length;n++)t(n)},closeBtn:function(e){if(1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").nextBtn(null,t)}.bind(this)),this.node.on("pre",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").preBtn(null,t)}.bind(this)),this.node.on("fresh",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").freshBtn(null,t)}.bind(this))}});cc._RF.pop()},{UITools:"UITools",connect:"connect",gameConfig:"gameConfig",imgPath:"imgPath",websocket:"websocket"}],course3:[function(e,t,n){"use strict";cc._RF.push(t,"c7d9aW939xC9bn2/msWh7JE","course3");var o=e("websocket"),i=e("connect"),c=e("gameConfig"),s=e("UITools"),a=cc.Enum({orange:"Img/other/feibiao_Orange.png",red:"Img/other/feibiao_Red.png",blue:"Img/other/feibiao_blue.png",yellow:"Img/other/feiniao_Yellow.png"});cc.Class({extends:cc.Component,properties:{quention:cc.Node,result:cc.Node,feibiaoPre:cc.Prefab},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=3,this.initEventHandler(),this.fbColor=[],this.fbRotation=[],this.resultJS=[],this.quentionJS=[],this.init()},start:function(){},init:function(){this.setFeibiaoSp(),this.setFeibiaoRotation();for(var e=0;e<this.fbColor.length;e++){var t=s.onInstantiate(this.feibiaoPre,this.quention).getComponent("feibiaoJS");t.setFeibiaoSp(this.fbColor[e]),t.setFeibiaoRotation(this.fbRotation[e]),t.setFeibiaoAction(),t.setFeibiaoIsbiaozhi(),this.quentionJS.push(t);var n=s.onInstantiate(this.feibiaoPre,this.result).getComponent("feibiaoJS");n.setFeibiaoSp(this.fbColor[e]),n.setFeibiaoRotation(0),n.setParent(this),this.resultJS.push(n)}},Judgment:function(){for(var e=0;e<this.resultJS.length;e++){if(this.resultJS[e].RotValut!=this.fbRotation[e])return!1}return!0},videoBtn:function(){for(var e=0;e<this.quentionJS.length;e++)this.quentionJS[e].setFeibiaoAction()},reSetBtn:function(){for(var e=0;e<this.resultJS.length;e++)this.resultJS[e].setFeibiaoRotation(0)},setFeibiaoSp:function(){this.fbColor=5==Global.gamePage?[a.orange,a.blue,a.red,a.yellow]:[a.orange,a.blue,a.red]},setFeibiaoRotation:function(){switch(Global.gamePage){case 1:this.fbRotation=[1,1,2];break;case 2:this.fbRotation=[3,2,3];break;case 3:this.fbRotation=[2,0,0];break;case 4:this.fbRotation=[2,2,1];break;case 5:this.fbRotation=[0,0,2,0]}},closeBtn:function(e){if(1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").nextBtn(null,t)}.bind(this)),this.node.on("pre",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").preBtn(null,t)}.bind(this)),this.node.on("fresh",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").freshBtn(null,t)}.bind(this))}});cc._RF.pop()},{UITools:"UITools",connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],course4:[function(e,t,n){"use strict";cc._RF.push(t,"91beeKDlPhGtKd1Na229WjM","course4");var o=e("websocket"),i=e("connect"),c=e("gameConfig"),s=e("UITools"),a=cc.Enum({line:"Img/annimal/line2.png",line2:"Img/annimal/line.png",kora:"Img/annimal/kora2.png",kora2:"Img/annimal/kora.png",rabble:"Img/annimal/rabble2.png",rabble2:"Img/annimal/rabble.png"}),l=cc.Enum({other1:"twoAnnimal",other2:"threeAnnimal",strak:"strak"});cc.Class({extends:cc.Component,properties:{annimalMask:[cc.Node],annimalPre:cc.Prefab,titleFrame:[cc.SpriteFrame],title:cc.Sprite,touchNode:cc.Node},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=4,this.initEventHandler(),this.annimalArr=[],this.annimalNode=[],Global.isAction=!1,this.init()},start:function(){},changeHandSp:function(e){this.node.getComponent("pointer").changeHandToChuizi(e)},setAnmimal:function(){switch(Global.gamePage){case 1:this.annimalArr=[0,0,0,0,1,0];break;case 2:this.annimalArr=[0,0,0,3,0,0];break;case 3:this.annimalArr=[2,0,0,0,0,0];break;case 4:this.annimalArr=[0,0,1,0,0,0];break;case 5:this.annimalArr=[0,3,0,0,0,0];break;case 6:this.annimalArr=[0,0,0,0,0,2];break;case 7:this.annimalArr=[2,0,3,0,0,0];break;case 8:this.annimalArr=[0,1,3,0,0,0];break;case 9:this.annimalArr=[1,0,3,0,2,0];break;case 10:this.annimalArr=[0,1,0,3,0,2]}},playOtherSound:function(){var e=null;7==Global.gamePage?e=l.other1:9==Global.gamePage&&(e=l.other2),null!=e&&Global.musicManager.playEffect(e)},changeTitle:function(){Global.gamePage>=7?this.title.spriteFrame=this.titleFrame[1]:this.title.spriteFrame=this.titleFrame[0]},init:function(){var e=this;this.changeTitle(),this.setAnmimal(),this.playOtherSound();for(var t=0;t<this.annimalArr.length;t++){var n=this.annimalArr[t];0!=n?function(){var o=e.getAnnimalUrl(n),i=s.onInstantiate(e.annimalPre,e.annimalMask[t]),c=i.getComponent("annimalJS");e.annimalNode.push(i),c.setannimalData(o),c.setSp(),i.runAction(cc.moveBy(.3,cc.p(0,310))),Global.isAction=!0;var a=e,l=cc.callFunc(function(){Global.isAction=!1});setTimeout(function(){i.runAction(cc.sequence(cc.moveBy(.3,cc.p(0,-310)),l)),a.touchNode.on(cc.Node.EventType.MOUSE_ENTER,function(){a.changeHandSp(!0)},a),a.touchNode.on(cc.Node.EventType.MOUSE_LEAVE,function(){a.changeHandSp(!1)},a)},3e3)}():this.annimalNode.push(null)}},onClickNum:function(e,t){if(1!=Global.isAction){var n=parseInt(t);if(0!=this.annimalArr[n]){var o=this.annimalNode[n];if(null!=o){var i=o.getComponent("annimalJS"),c=i.isSure;if(Global.isAction=!0,Global.musicManager.playEffect("strak"),Global.musicManager.playRightEffect(),1==c)return void(Global.isAction=!1);var s=cc.callFunc(function(){i.chuiziAct(),Global.isAction=!1});o.runAction(cc.sequence(cc.moveBy(.5,cc.p(0,310)),s))}}else Global.musicManager.playErrEffect()}},onclickReLook:function(){var e=this;if(1!=Global.isAction)for(var t=function(t){var n=e.annimalNode[t];if(null!=n){if(1==n.getComponent("annimalJS").isSure)return"continue";Global.isAction=!0,n.runAction(cc.moveBy(.5,cc.p(0,310)));var o=cc.callFunc(function(){Global.isAction=!1});setTimeout(function(){n.runAction(cc.sequence(cc.moveBy(.5,cc.p(0,-310)),o))},3e3)}},n=0;n<this.annimalNode.length;n++)t(n)},getAnnimalUrl:function(e){var t=[];switch(e){case 1:t=[a.line,a.line2];break;case 2:t=[a.kora,a.kora2];break;case 3:t=[a.rabble,a.rabble2];break;default:t=[a.line,a.line2]}return t},closeBtn:function(e){if(1!=Global.isAction&&1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").nextBtn(null,t)}.bind(this)),this.node.on("pre",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").preBtn(null,t)}.bind(this)),this.node.on("fresh",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").freshBtn(null,t)}.bind(this))}});cc._RF.pop()},{UITools:"UITools",connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],course5:[function(e,t,n){"use strict";cc._RF.push(t,"4aca1f7fJBPPI5y23HJC+so","course5");var o=e("websocket"),i=e("connect"),c=e("gameConfig"),s=e("UITools"),a=cc.Enum({water:"Img/other/water.png",wind:"Img/other/wind.png",yun:"Img/other/yun.png",cat1:"Img/annimal/cat1.png",cat2:"Img/annimal/cat2.png",dog1:"Img/annimal/dog.png",dog2:"Img/annimal/dog1.png",qingwa1:"Img/annimal/qingwa.png",qingwa2:"Img/annimal/qingwa2.png"}),l=cc.Enum({cat:"cat",water:"water",wine:"wine",dalei:"dalei",dog:"dog",qingwa:"qiwa"});cc.Class({extends:cc.Component,properties:{thingLayer:cc.Node,thingPre:cc.Prefab},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=5,this.initEventHandler(),this.thingSp=[],this.soundUrl=[],this.init()},start:function(){},init:function(){this.setThingSp();for(var e=0;e<this.thingSp.length;e++){var t=s.onInstantiate(this.thingPre,this.thingLayer).getComponent("thingSoundJS");t.setThingUrl(this.thingSp[e]),t.setSoundUrl(this.soundUrl[e]),t.setThingSp(!1)}},setThingSp:function(){1==Global.gamePage?(this.thingSp=[[a.water,a.water],[a.yun,a.yun],[a.wind,a.wind]],this.soundUrl=[l.water,l.dalei,l.wine]):2==Global.gamePage&&(this.thingSp=[[a.qingwa1,a.qingwa2],[a.dog1,a.dog2],[a.cat1,a.cat2]],this.soundUrl=[l.qingwa,l.dog,l.cat])},closeBtn:function(e){if(1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").nextBtn(null,t)}.bind(this)),this.node.on("pre",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").preBtn(null,t)}.bind(this)),this.node.on("fresh",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").freshBtn(null,t)}.bind(this))}});cc._RF.pop()},{UITools:"UITools",connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],course6:[function(e,t,n){"use strict";cc._RF.push(t,"85ceeWOo2BPVrGmhFRAkz4y","course6");var o=e("websocket"),i=e("connect"),c=e("gameConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=6,this.initEventHandler()},start:function(){},closeBtn:function(e){if(1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").nextBtn(null,t)}.bind(this)),this.node.on("pre",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").preBtn(null,t)}.bind(this)),this.node.on("fresh",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").freshBtn(null,t)}.bind(this))}});cc._RF.pop()},{connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],course7:[function(e,t,n){"use strict";cc._RF.push(t,"4aae71B7n1EQqQwNke+GvRK","course7");var o=e("websocket"),i=e("connect"),c=e("gameConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=7,this.initEventHandler()},start:function(){},closeBtn:function(e){if(1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").nextBtn(null,t)}.bind(this)),this.node.on("pre",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").preBtn(null,t)}.bind(this)),this.node.on("fresh",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").freshBtn(null,t)}.bind(this))}});cc._RF.pop()},{connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],course8:[function(e,t,n){"use strict";cc._RF.push(t,"2e5b7ihL9BG4assuPLcy8Le","course8");var o=e("websocket"),i=e("connect"),c=e("gameConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this.node.getChildByName("mask");i._name!==c.CLIENT_NAME.TEACHER&&(e.active=!0),this.others=cc.find("staticNode"),i._name!==c.CLIENT_NAME.TEACHER?this.others.getComponent("staticNodeJS").isShow(!1):this.others.getComponent("staticNodeJS").isShow(!0),o.dataEventHandler=this.node,Global.tiaozhuanlogo=8,this.initEventHandler()},start:function(){},closeBtn:function(e){if(1!=window.isDraw){if(e){i.isSave=c.SERVER_SAVE.JUMP,i.json_string({type:"close"})}GlobalData.tiaozhuanlogo++,cc.director.loadScene("video1scene")}},initEventHandler:function(){var e=this;this.node.on("touch_end",function(t){var n=t.detail.step;e.showResult(n)}.bind(this)),this.node.on("close",function(t){e.closeBtn()}.bind(this)),this.node.on("next",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").nextBtn(null,t)}.bind(this)),this.node.on("pre",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").preBtn(null,t)}.bind(this)),this.node.on("fresh",function(e){var t=e.detail;this.others.getComponent("staticNodeJS").freshBtn(null,t)}.bind(this))}});cc._RF.pop()},{connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],feibiaoJS:[function(e,t,n){"use strict";cc._RF.push(t,"993efMapPpBkpxYhvvSRLQe","feibiaoJS");var o=e("UITools");cc.Class({extends:cc.Component,properties:{feibiaoNode:cc.Node},onLoad:function(){this.RotValut=0,this.node.on("touchend",function(){this.onClickFeiBiao()},this),this._parent=null,this.isSign=!1},start:function(){},setFeibiaoIsbiaozhi:function(){this.isSign=!0},setParent:function(e){this._parent=e},setFeibiaoRotation:function(e){this.RotValut=e,this.feibiaoNode.rotation=90*e},setFeibiaoSp:function(e){var t=this.feibiaoNode.getComponent(cc.Sprite);o.setSpriteImg(t,e)},setFeibiaoAction:function(){Global.isAction=!0,this.feibiaoNode.runAction(cc.fadeIn(1));var e=this,t=cc.callFunc(function(){Global.isAction=!1});setTimeout(function(){e.feibiaoNode.runAction(cc.sequence(cc.fadeOut(.5),t))},3e3)},onClickFeiBiao:function(){1!=this.isSign&&(this.RotValut++,this.RotValut=4==this.RotValut?0:this.RotValut,this.feibiaoNode.rotation=90*this.RotValut,1==this._parent.Judgment()&&Global.musicManager.playRightEffect())}}),cc._RF.pop()},{UITools:"UITools"}],gameConfig:[function(e,t,n){"use strict";cc._RF.push(t,"f3643mDj05D2oyY4oHCVx8U","gameConfig");var o=cc.Enum({SAVE:"Y",JUMP:"N",CLEAR:"C"}),i=cc.Enum({TEACHER:"teacher",STUDENT:"student"}),c=cc.Enum({INDEX:"index",NEXT:"next",PRE:"pre",FRESH:"fresh"});t.exports={SERVER_SAVE:o,CLIENT_NAME:i,EventType:c},cc._RF.pop()},{}],global:[function(e,t,n){"use strict";cc._RF.push(t,"4234d7n4BxAiZWTotAkwbeR","global"),window._isfresh=!1,window.videos=[],cc.vv={},window.index=0,window.index1=0,window.syncData=[],window._isFirst=!1,window.currentData=[],window.bgMusicId=null,window.audioID=null,window.isDraw=!1,window.Global={tiaozhuanlogo:1,musicManager:null,gamePage:1,audioID:null,bgMusicId:null,isAction:!1,playMusic:!1},cc._RF.pop()},{}],hover:[function(e,t,n){"use strict";cc._RF.push(t,"7f4c9oeHm5KA6t78K21EnQz","hover");e("module"),e("websocket"),e("connect");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.btnleave,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.btnHover,this)},start:function(){},btnHover:function(e){this.node;this.node.scale=1.3*this.node.scale},btnleave:function(e){this.node;this.node.scale=this.node.scale/1.3}}),cc._RF.pop()},{connect:"connect",module:void 0,websocket:"websocket"}],imgPath:[function(e,t,n){"use strict";cc._RF.push(t,"5a1beEdyLNJ9Z9UcJZ+GtsS","imgPath");var o=cc.Enum({maozi:"Img/course1/maozi.png",shoutao1:"Img/course1/shoutao.png",shoutao2:"Img/course1/shoutao2.png",wazi:"Img/course1/wazi.png"});t.exports={IMG_PATH:o},cc._RF.pop()},{}],loading:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","loading"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loading()},loading:function(){cc.loader.loadResDir("Img",cc.SpriteFrame,function(e,t){cc.loader.loadResDir("Sound",cc.AudioClip,function(e,t){cc.director.preloadScene("course1",function(){console.log("course1 loading")}),cc.director.preloadScene("course2",function(){console.log("course2 loading")}),cc.director.preloadScene("course3",function(){console.log("course3 loading")}),cc.director.preloadScene("course4",function(){console.log("course4 loading")}),cc.director.preloadScene("course5",function(){console.log("course5 loading")}),cc.director.preloadScene("course6",function(){console.log("course6 loading")}),cc.director.preloadScene("course7",function(){console.log("course7 loading")}),cc.director.preloadScene("course8",function(){console.log("course8 loading")}),cc.director.preloadScene("video1scene",function(){console.log("video1scene loading")}),cc.director.preloadScene("startSence",function(e){cc.director.loadScene("startSence")})})})}}),cc._RF.pop()},{}],pointer:[function(e,t,n){"use strict";cc._RF.push(t,"4326aCtAdNMwq6m5VFR1yDX","pointer");var o=e("connect"),i=e("gameConfig"),c=e("UITools");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.canvas.style.cursor="none",this.isChuizi=!1,this.initEventHandler(),this.open_limits();var e=cc.director.getScene().getChildByName("New Node");if(e)var t=e.getComponent("New Node").getData();t&&this.node.setPosition(0,0),this.pointer=cc.find("staticNode/hand")},open_limits:function(){"teacher"===o._name&&o._isPermited||"student"===o._name&&!o._isPermited?(this.node.on(cc.Node.EventType.MOUSE_MOVE,this.mouse_move,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.mouse_up,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.mouse_down,this)):"teacher"!==o._name&&(this.node.off(cc.Node.EventType.MOUSE_MOVE,this.mouse_move,this),this.node.off(cc.Node.EventType.MOUSE_UP,this.mouse_up,this),this.node.off(cc.Node.EventType.MOUSE_DOWN,this.mouse_down,this))},start:function(){},changeHandToChuizi:function(e){var t=this.pointer.getComponent(cc.Sprite);1==e?(this.isChuizi=!0,this.pointer.anchorY=.6,this.pointer.anchorX=.4,c.setSpriteImg(t,"Img/other/chuizi")):(this.isChuizi=!1,this.pointer.anchorY=1,this.pointer.anchorX=0,c.setSpriteImg(t,"Img/btn/hand"))},chuiziAction:function(){var e=cc.moveBy(.1,cc.p(0,-100)),t=cc.rotateBy(.1,-20),n=cc.rotateBy(.1,20),o=cc.moveBy(.1,cc.p(0,100));this.pointer.runAction(cc.sequence(cc.spawn(e,t),cc.spawn(n,o)))},initEventHandler:function(){this.node.on("mouser",function(e){console.log("44&&&&&",e.detail);e=e.detail;var t={};t.x=e.x,t.y=e.y,this.mouse_move(t)}.bind(this)),this.node.on("mouse_up",function(e){this.mouse_up()}.bind(this)),this.node.on("mouse_down",function(e){this.mouse_down()}.bind(this))},mouse_down:function(e){if(e){o.isSave=i.SERVER_SAVE.JUMP;o.json_string({type:"mouse_down"})}1==this.isChuizi&&this.chuiziAction(),cc.loader.loadRes("Sound/click.mp3",cc.AudioClip,function(e,t){cc.audioEngine.playEffect(t,!1)})},mouse_move:function(e){if(e.x&&e.y)this.pointer.x=e.x,this.pointer.y=e.y;else{var t=this.node.convertToNodeSpaceAR(cc.v2(e._x,e._y)),n={type:"mouser",msg:{x:t.x,y:t.y}};o.isSave=i.SERVER_SAVE.SAVE,o.json_string(n),this.pointer.x=t.x,this.pointer.y=t.y}},mouse_up:function(e){}}),cc._RF.pop()},{UITools:"UITools",connect:"connect",gameConfig:"gameConfig"}],staticNodeJS:[function(e,t,n){"use strict";cc._RF.push(t,"3fd08f9mQVNc7l/WP61jCGd","staticNodeJS");var o=e("websocket"),i=e("connect"),c=e("gameConfig");cc.Class({extends:cc.Component,properties:{pre:cc.Node,fresh:cc.Node,next:cc.Node,pointer:cc.Node,musicNotPlayBtn:cc.Node,musicPlayBtn:cc.Node,close:cc.Node},onLoad:function(){cc.game.addPersistRootNode(this.node),this.pre.on("touchend",this.preBtn,this),this.next.on("touchend",this.nextBtn,this),this.fresh.on("touchend",this.freshBtn,this),this.close.on("touchend",this.closeBtn,this),this.musicPlayBtn.on("touchend",function(){this.playBgMusic("0")},this),this.musicNotPlayBtn.on("touchend",function(){this.playBgMusic("1")},this),this.syncKey=0},start:function(){},isShow:function(e){this.pre.active=e,1==Global.gamePage?this.pre.getComponent(cc.Button).interactable=!1:this.pre.getComponent(cc.Button).interactable=!0,this.next.active=e,this.close.active=e},playBgMusic:function(e){e&&(this.changeBtnSp(e),"1"==e?(Global.playMusic=!0,null==Global.bgMusicId?Global.musicManager.playBgMusic():Global.musicManager.resumeBgMusic()):(Global.playMusic=!1,Global.musicManager.pauseBgMusic()))},changeBtnSp:function(e){e&&("1"==e?(this.musicNotPlayBtn.active=!1,this.musicPlayBtn.active=!0,this.musicPlayBtn.runAction(cc.repeatForever(cc.rotateBy(3,360)))):(this.musicPlayBtn.active=!1,this.musicNotPlayBtn.active=!0))},nextBtn:function(e,t){if(1!=Global.isAction){var n=null;if(null!=e){if(1==Global.tiaozhuanlogo){if(1==Global.gamePage)return Global.gamePage++,void cc.director.loadScene("course"+Global.tiaozhuanlogo)}else if(2==Global.tiaozhuanlogo){if(6!=Global.gamePage)return Global.gamePage++,void cc.director.loadScene("course"+Global.tiaozhuanlogo)}else if(3==Global.tiaozhuanlogo){if(5!=Global.gamePage)return Global.gamePage++,void cc.director.loadScene("course"+Global.tiaozhuanlogo)}else if(4==Global.tiaozhuanlogo){if(10!=Global.gamePage)return Global.gamePage++,void cc.director.loadScene("course"+Global.tiaozhuanlogo)}else if(5==Global.tiaozhuanlogo&&2!=Global.gamePage)return Global.gamePage++,void cc.director.loadScene("course"+Global.tiaozhuanlogo);n=Global.tiaozhuanlogo,i.isSave=c.SERVER_SAVE.CLEAR;var o={type:"next",msg:{sence:Global.tiaozhuanlogo}};i.json_string(o)}else n=t.sence;n++,Global.tiaozhuanlogo=n,cc.director.loadScene("video1scene")}},preBtn:function(e,t){if(0!=this.pre.getComponent(cc.Button).interactable&&1!=Global.isAction){var n=null;if(null!=e){if(1!=Global.gamePage)return Global.gamePage--,void cc.director.loadScene("course"+Global.tiaozhuanlogo);n=Global.tiaozhuanlogo,i.isSave=c.SERVER_SAVE.SAVE;var o={type:"pre",msg:{sence:Global.tiaozhuanlogo}};i.json_string(o)}else n=t.sence;n--,Global.tiaozhuanlogo=n,cc.director.loadScene("course"+Global.tiaozhuanlogo)}},freshBtn:function(e,t){if(1!=Global.isAction){if(null!=e){i.isSave=c.SERVER_SAVE.SAVE;var n={type:"fresh",msg:{sence:Global.tiaozhuanlogo}};i.json_string(n)}else Global.tiaozhuanlogo=t.sence;cc.director.loadScene("course"+Global.tiaozhuanlogo)}},closeBtn:function(e,t){if(1!=Global.isAction){var n=null;if(null!=e){n=Global.tiaozhuanlogo,i.isSave=c.SERVER_SAVE.CLEAR;var o={type:"close",msg:{sence:Global.tiaozhuanlogo}};i.json_string(o)}else n=t.sence;n++,Global.tiaozhuanlogo=n,cc.director.loadScene("video1scene")}},reconnection:function(){if(0!==window.currentData.length){var e=this.syncKey+10;e>window.currentData.length-1&&(e=window.currentData.length-1);for(var t=this.syncKey;t<e;t++){var n=window.currentData[t],i=n.type,c=n.msg;cc.log("\u53d1\u51fa\u6d88\u606f=========================="+i+"-----"+c),o.dataEventHandler.emit(i,c)}this.syncKey===window.currentData.length-1?window.currentData.length=0:this.syncKey+=10}},update:function(e){this.reconnection()}}),cc._RF.pop()},{connect:"connect",gameConfig:"gameConfig",websocket:"websocket"}],thingSoundJS:[function(e,t,n){"use strict";cc._RF.push(t,"af899/ajx1G9JJFgojjnva6","thingSoundJS");var o=e("UITools");cc.Class({extends:cc.Component,properties:{thingSp:cc.Sprite},onLoad:function(){this.sound=null,this.url=null},start:function(){},setThingUrl:function(e){this.url=e},setThingSp:function(e){1==e?o.setSpriteImg(this.thingSp,this.url[1]):o.setSpriteImg(this.thingSp,this.url[0])},setSoundUrl:function(e){this.sound=e},onClickSound:function(){if(null!=this.sound){var e=this;this.setThingSp(!0);Global.musicManager.playEffect(this.sound,function(){e.setThingSp(!1)})}}}),cc._RF.pop()},{UITools:"UITools"}],websocket:[function(e,t,n){"use strict";cc._RF.push(t,"9bf10VmHwhHbZdG8CodLMRC","websocket");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var c="open",s="close",a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.ws=null,this.wsUrl="",this.wsTimeout=2e3,this.lockReconnect=!1,this.checkTimeout=6e4,this.timeoutObj=null,this.serverTimeoutObj=null,this._clientSockets={},this._total=0,this._eventData=[],this._issucc=!1,this.isFirst=!1,this._isteacher=!1,this._isstu=null,this.dataEventHandler=null}return i(e,[{key:"resetTimeout",value:function(){return clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj),this}},{key:"startTimeout",value:function(){var e=this;e.timeoutObj=setTimeout(function(){e.serverTimeoutObj=setTimeout(function(){e.ws.close()},e.checkTimeout)},this.checkTimeout)}},{key:"init",value:function(e,t){var n=this;this.wsUrl=e,this.fn=t,this.lockReconnect=!1,this.lockReconnect1=!1,this.isCloseWs=!1,this.createWebSocket(e),this.isSuccess=!1,setTimeout(function(){n.isSuccess||(n.close(),n.fn&&n.fn(s))},1e4)}},{key:"isClose",value:function(){return this.isCloseWs}},{key:"createWebSocket",value:function(e){console.log("223&&&&&&&&&",e);try{console.log("225&&&&&&&&&&&&&&&",this._clientSockets),this.ws=new WebSocket(e),console.log("225228&&&&&&&&&&&&&&&",this._clientSockets),this.initEventHandle(),console.log("225&&&&&&&&&&&&&&&",this._clientSockets)}catch(t){this.reconnect(e)}}},{key:"initEventHandle",value:function(){var e=this;this.ws.onclose=function(t){console.log("websocket\u670d\u52a1\u5173\u95ed\u4e86",t),e.isClose()||(e.fn&&e.fn(s),e.reconnect(t.target.url))},this.ws.onerror=function(t){console.log("websocket\u670d\u52a1\u51fa\u9519\u4e86",t),e.isClose()||(e.fn&&e.fn(s),e.reconnect(t.target.url))},this.ws.onopen=function(t){console.log("websocket \u8fde\u63a5\u6210\u529f",t),e.isSuccess=!0,"1"!==t.target.url.substr(t.target.url.indexOf(",")+1,1)&&"0"!==t.target.url.substr(t.target.url.indexOf(",")+1,1)||(console.log("262&&&&&&&&&&&&&"),e.fn&&e.fn(c)),console.log("225&&&&&&&&&&&&&&&",e._clientSockets)},this.ws.onmessage=function(t){console.log("259@@@@@@@@@@@@@@@@@@@@@@@@@@@@event=",t),console.log(t.data,o(t.data));var n=JSON.parse(t.data);if(console.log(n),"HeartBeat"!==n){var i=n.type,c=n.msg;console.log(i,c),e.dataEventHandler.emit(i,c)}}}},{key:"reconnect",value:function(e){var t=this;if(console.log("\u4e8b\u4ef6\u91cd\u8fde"),console.log("296***********************",this.lockReconnect),-1!==e.indexOf("webSocket2")){if(this.lockReconnect1)return;this.lockReconnect1=!0}else{if(this.lockReconnect)return;this.lockReconnect=!0}setTimeout(function(){t.createWebSocket(e),-1!==e.indexOf("webSocket2")?(t._clientSockets={},t.lockReconnect1=!1):t.lockReconnect=!1},this.wsTimeout)}},{key:"close",value:function(){this.isCloseWs=!0,this.ws.close()}},{key:"send_data",value:function(e,t){console.log(e,t),console.log(void 0===t?"undefined":o(t)),e&&e.send(t)}}]),e}();t.exports=new a,cc._RF.pop()},{}]},{},["connect","websocket","GameManager","MusicManager","UITools","VideoPlayerCtrl","course0","course1","course2","course3","course4","course5","course6","course7","course8","loading","pointer","staticNodeJS","gameConfig","global","hover","imgPath","annimalJS","feibiaoJS","thingSoundJS"]);
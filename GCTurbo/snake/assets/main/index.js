window.__require=function e(t,n,o){function i(s,c){if(!n[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({ComboBox:[function(e,t){"use strict";cc._RF.push(t,"133eeb3BdFEWJY2+XYBOhAK","ComboBox");var n=["English","Japanese"],o=["en","jp"];cc.Class({extends:cc.Component,properties:{triangle:cc.Node,comboLabel:cc.Label,dropDown:cc.Node,vLayoutNode:cc.Node,contentNode:cc.Node,itemPrefab:cc.Prefab},onLoad:function(){this.isDropDown=!1,this.comboLabel.string="en"==Global.language?Global.languageData.t("label_text.English"):Global.languageData.t("label_text.Japanese")},onClickItemBtn:function(e){Global.musicManager.playClickEffect(),this.rotateTriangle(),this.showHideDropDownBox(),this.isDropDown?this.isDropDown=!1:this.isDropDown=!0,e&&this.initItems()},rotateTriangle:function(){if(this.isDropDown){var e=cc.rotateTo(.5,90).easing(cc.easeCubicActionOut());this.triangle.runAction(e)}else{var t=cc.rotateTo(.5,180).easing(cc.easeCubicActionOut());this.triangle.runAction(t)}},showHideDropDownBox:function(){this.isDropDown?this.dropDown.active=!1:this.dropDown.active=!0},initItems:function(){var e=this.contentNode.height=0;this.vLayoutNode.removeAllChildren();for(var t=0;t<n.length;t++){var i=cc.instantiate(this.itemPrefab);i.getComponent("Item").setData(this,{language:n[t],languageSM:o[t]}),this.vLayoutNode.addChild(i),e+=i.height}e>this.contentNode.height&&(this.contentNode.height=e)}}),cc._RF.pop()},{}],GCTurboAnalytics:[function(e,t){"use strict";cc._RF.push(t,"87707wQyDVFWpvYS3kZuAeL","GCTurboAnalytics");var n=function(){this.resetData()},o=n.prototype,i=null;o.resetData=function(){},o.init=function(){var e={gameId:Global.getGameId(),version:Global.getVersion(),debugLog:!0,amplitude:{apiKey:Global.getApiKey(),debugLog:!0}};window.gcTurboAnalytics.init(e)},o.sendBaseUserProperties=function(){var e=new Object;e.match_play_enabled=!1,e.date=Global.tools.timeFormat(Date.now()),e.version=Global.getVersion(),e.user_id=window.FBInstant?FBInstant.player.getID():"Unknown",e.context_id=window.FBInstant?FBInstant.context.getID():null,e.context_type=window.FBInstant?FBInstant.context.getType():"Unknown",window.gcTurboAnalytics.setUserProperties(e)},o.setUserProperties=function(e){window.gcTurboAnalytics.setUserProperties(e)},o.pushEvent=function(e,t){window.gcTurboAnalytics.pushEvent(e,t)},t.exports=function(){return i||(i=new n),i},cc._RF.pop()},{}],GameConfig:[function(e,t){"use strict";cc._RF.push(t,"2205ejlHw5OmYEUMB09Kzm3","GameConfig");var n=cc.Enum({NORMAL:0,WRONG:1,RIGHT:2}),o=cc.Enum({WAIT:0,INGAME:1,CONTINUE:2,ROUNDFINISH:3,SETTLE:4,SHOWTIME:5}),i=cc.Enum({bgMusic:"audio/bgMusic",countDown_nor:"audio/cd_nor",countDown_go:"audio/cd_go",highScore:"audio/highScore",lowScore:"audio/lowScore",success:"audio/success",break:"audio/break",crash:"audio/crash",click:"audio/click",close:"audio/close",jump:"audio/jump",select:"audio/select",msg:"audio/msg",promptUI:"prefabs/promptUI",loading:"prefabs/loading",setting:"prefabs/setting",help:"prefabs/help",result:"prefabs/result"}),a=cc.Enum({bgmusicStatus:"bgmusicStatus",effectStatus:"effectStatus",highestScore:"highestScore",rewardAdsLastTime:"rewardAdsLastTime",level:"level"}),s=cc.Enum({rank:1e3,top:2e3,mask:2500});t.exports={STATUS_TYPE:n,GAME_STATUS:o,clientEvent:{EnterBackground:"EnterBackground",EnterForeground:"EnterForeground",playGame:"playGame",gameOver:"gameOver",gotoHome:"gotoHome",showTime:"showTime",updateAsset:"updateAsset",updateLabel:"updateLabel",gogogo:"gogogo",changeHero:"changeHero",createHero:"createHero"},PERLOAD_NAME:i,KEY:a,LAYER_ORDER:s,Events:{choose:"choose",create:"create",create_shortcut:"create_shortcut",share:"share",subscribe_bot:"subscribe_bot",switch:"switch",update:"update"},EventType:{choose:"choose",create:"create",switch:"switch",update:"update",share:"share"},FeatureType:{invite:"INVITE",share:"SHARE"},Feature:{challenge:"challenge",atStart:"atStart",atGameOver:"atGameOver",fromScoreBoard:"fromScoreBoard",fromGameOver:"fromGameOver"},Asset:{invite1:"invite1",share1:"share1"},Source:{homeAlone:"homeAlone",homeWithFriends:"homeWithFriends",gameOverWithFriends:"gameOverWithFriends",gameOverChallenge:"gameOverChallenge",retry:"retry"}},cc._RF.pop()},{}],Global:[function(e,t){"use strict";cc._RF.push(t,"5b57cRzx91BHrVzrUm7nlFn","Global"),window.Global=window.Global||{},window.reStartGame=function(){cc.game.restart()},window.startGame=function(){window.isShow=!1,cc.game.on(cc.game.EVENT_HIDE,function(){window.isShow&&(Global.emitter.emit("EnterBackground"),window.isShow=!1)}),cc.game.on(cc.game.EVENT_SHOW,function(){window.isShow||(Global.emitter.emit("EnterForeground"),window.isShow=!0)}),Global.tools=e("Tools")(),Global.emitter=e("emitter")(),Global.cGridSize=32,Global.cBound=8,Global.blockCount=3,Global.Pos2EventMap={},Global.EmptyPos={};for(var t=1-Global.cBound;t<Global.cBound-1;t++)for(var n=1-Global.cBound;n<Global.cBound-1;n++)Global.EmptyPos[t+","+n]=[t,n];Global.language=cc.sys.localStorage.getItem(Global.getAppName()+"language",Global.language)||"en",Global.languageData=e("LanguageData"),Global.languageData.init(Global.language),Global.isDebug=!0,Global.curSource=null,Global.entryTime=Date.now(),Global.player={curScore:0,highestScore:0};var o=cc.sys.localStorage.getItem("highestScore");o&&(Global.player.highestScore=1*o),Global.adsAddCoin=250,Global.maxAdsRewardeTimes=1,Global.curActionTime=Global.initActionTime=15e3,Global.maxActionTime=6e4,Global.session_ct=cc.sys.localStorage.getItem("session_ct")||0,Global.gameCount=0,Global.gameCompleted=0,Global.gameContinued=0,Global.gameNonContinued=0,Global.gameMaxPlayed=0;var i={invite:"INVITE",share:"SHARE"},a=cc.sys.localStorage.getItem("src_invite_ct");Global.src_invite_ct=a||0,Global.src_invite_ct=1*Global.src_invite_ct;var s=cc.sys.localStorage.getItem("src_invite_ct_feature");for(var c in Global.src_invite_ct_feature=null==s||null==s?{}:JSON.parse(s),Global.src_invite_ct_session=0,Global.src_invite_ct_feature_session={},i)i.hasOwnProperty(c)&&(Global.src_invite_ct_feature_session[i[c]]=0,Global.src_invite_ct_feature[i[c]]=Global.src_invite_ct_feature[i[c]]||0);Global.invite_ct=0,Global.subscribe_ct=0,Global.subscribe_ct_fail=0,Global.subscribe_ct_success=0,Global.gct=e("GCTurboAnalytics")(),Global.gct.init(),Global.gct.sendBaseUserProperties(),Global.resourceManager=e("ResourceManager")(),Global.musicManager=e("MusicManager")(),e("PreLoadManager"),Global.panel=e("Panel")(),Global.boardNamePF="globalHighscore",Global.watchedInterstitials=0,Global.watchedRewardedVideos=0,Global.preloadedRewardedVideo=null,Global.preloadedInterstitial=null,Global.SERVICE_ID="AppID",Global.mmGameID="302577837580222"},Global.getRewardVideoID=function(){return Global.isDebug?"606780556936568_615125726102051":"317876232685042_325344748604857"},Global.getInterstitialVideoID=function(){return Global.isDebug,""},Global.getRewardAdsDiffTime=function(){return Global.isDebug?6e4:3e5},Global.getAppName=function(){return Global.isDebug?"kungfu-jump-dev":"kungfu-jump"},Global.getAuthURL=function(){return Global.isDebug?"https://qhxhtbbay0.execute-api.us-east-1.amazonaws.com/dev_stage/session":"https://obvr9m58se.execute-api.us-east-1.amazonaws.com/prod_stage/session"},Global.getHost=function(){return Global.isDebug?"https://messaging-service-dev.gct-internal.net":"https://messaging-service-prod.gct-internal.net"},Global.getVersion=function(){return Global.isDebug?"1.0.22":"1.0.17"},Global.getGameId=function(){return Global.isDebug?"287631":"287632"},Global.getApiKey=function(){return Global.isDebug?"31357a8c95a0f1a122004f9229a562a1":"a6689ed184fb97c0594638b473721e1c"},Global.getPFTitleID=function(){return Global.isDebug?"D2ED2":"660F8"},Global.getNoticePath=function(){return Global.isDebug?"https://Global-static-dev.s3.amazonaws.com/link/notice_kungfujump_dev.json":"https://Global-static-dev.s3.amazonaws.com/link/notice_kungfujump_prod.json"},Global.Vector2Dir=function(e,t){return Math.abs(e)>Math.abs(t)?e<0?"left":"right":t<0?"down":"up"},Global.makeKeyPos=function(e){var t=e.split(","),n=parseInt(t[0]),o=parseInt(t[1]);Global.EmptyPos[e]=[n,o]},Global.makePosKey=function(e,t){return e+","+t},cc._RF.pop()},{GCTurboAnalytics:"GCTurboAnalytics",LanguageData:"LanguageData",MusicManager:"MusicManager",Panel:"Panel",PreLoadManager:"PreLoadManager",ResourceManager:"ResourceManager",Tools:"Tools",emitter:"emitter"}],Item:[function(e,t){"use strict";cc._RF.push(t,"63015ztVsdNVoLv7+UmBbiE","Item"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},_parentCtrl:null,_data:null},setData:function(e,t){this._parentCtrl=e,this._data=t,Global.languageData.init(Global.language),this.label.string=Global.languageData.t("label_text."+t.language)},onClickItemBtn:function(){this._parentCtrl.onClickItemBtn(),this._data.languageSM!=Global.language&&(Global.language=this._data.languageSM,cc.sys.localStorage.setItem(Global.getAppName()+"language",Global.language),Global.languageData.init(Global.language),this._parentCtrl.comboLabel.string=Global.languageData.t("label_text."+this._data.language),cc.audioEngine.stopAll(),reStartGame())}}),cc._RF.pop()},{}],LanguageData:[function(e,t){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=e("polyglot.min"),o=null;function i(e){return window.i18n.languages[e]}function a(e){e&&(o?o.replace(e):o=new n({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=i(e)||{};window.i18n.curLang=e,a(t),this.inst=o}},t:function(e,t){if(o)return o.t(e,t)},inst:o,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],n=0;n<e.length;++n){var o=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,o)}for(var i=0;i<t.length;++i){var a=t[i];a.node.active&&a.updateLabel()}for(var s=[],c=0;c<e.length;++c){var r=e[c].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,r)}for(var l=0;l<s.length;++l){var u=s[l];u.node.active&&u.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MainScene:[function(e,t){"use strict";cc._RF.push(t,"5e5966z/eFO2ar90G3Leqy1","MainScene");var n=e("GameConfig"),o=e("collideManager"),i=cc.Enum({0:"easy",1:"normal",2:"hard"}),a=[{initTime:.3,reduceTime:.01,intervalNum:2,minTime:.2},{initTime:.25,reduceTime:.01,intervalNum:1,minTime:.15},{initTime:.15,reduceTime:.01,intervalNum:2,minTime:.05}];cc.Class({extends:cc.Component,properties:{snake:{default:null,type:cc.Node},apple:{default:null,type:cc.Sprite},scoreLab:{default:null,type:cc.Label},highestLab:{default:null,type:cc.Label},scoreNum:{default:0,type:cc.Integer,notify:function(){Global.player.curScore=this.scoreNum,this.scoreLab.string=this.scoreNum,this.score>Global.player.highestScore&&(Global.player.highestScore=this.scoreNum,this.highestLab.string=this.scoreNum,cc.sys.localStorage.setItem("highestScore",Global.player.highestScore))}},portalController:{default:null,type:cc.Node},blockPrefab:{default:null,type:cc.Prefab},settingPanel:{default:null,type:cc.Node},speedLab:{default:null,type:cc.Label},levelLab:{default:null,type:cc.Label},homePageNode:{default:null,type:cc.Node},soundToggle:{default:null,type:cc.Toggle},_curLevel:1,_settingData:null},onLoad:function(){Global.emitter.on(n.clientEvent.EnterBackground,this.EnterBackground,this),Global.emitter.on(n.clientEvent.EnterForeground,this.EnterForeground,this),this.registerEvent(),this.isBackGround=!1,this.homePageNode.active=!0,this.onClickArrowBtn(null,0),Global.gameCtrl=this,this.settingPanel.active=!1,this._settingCtrl=this.settingPanel.getComponent("settingCtrl"),this.speedLab.string="Speed: 0",Global.musicManager.playBGM(n.PERLOAD_NAME.bgMusic);var e=cc.sys.localStorage.getItem(n.KEY.soundStatus);null==e||null==e||0==e?this.soundToggle.uncheck():1==e&&this.soundToggle.check();var t=this;t.initData();var i=cc.sys.localStorage.getItem("mapData");if(""!=i&&null!=i)for(var a in i=i.split("+")){var s=JSON.parse(i[a]),c=cc.instantiate(t.blockPrefab);c.parent=this.node,c.setPosition(s.x*Global.cGridSize,s.y*Global.cGridSize),o.setCollide(s.x,s.y,{type:"block"}),c.getComponent("block").changeTexture(s.kind)}else console.log("\u6ca1\u6709\u4fdd\u5b58\u6570\u636e");t.createApple(),t.sk=t.snake.getComponent("snake"),t.pc=t.portalController.getComponent("portal"),t.pc.createPort(),t.touchEnable=!0,t.node.on("touchstart",function(e){if(t.touchEnable&&t.pressEnable){var n=t.sk.getHeadGrid(),o=e.getLocation(),i=cc.winSize(),a=cc.winSize(),s=o.x-(a.x+i.width/2+n[0]*Global.cBound),c=o.y-(a.y+i.height/2+n[1]*Global.cBound),r=Global.Vector2Dir(s,c);r!=t.sk.MoveDir&&(t.touchEnable=!1),t.sk.setDir(r)}})},EnterBackground:function(){this.isBackGround=!0,this.unregisterEvent()},EnterForeground:function(){this.isBackGround&&(this.isBackGround=!1,this.registerEvent())},registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.game.canvas.focus()},unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onTouchMove:function(){},playGame:function(){this.homePageNode.active=!1,this.reset(),this.highestLab.string=Global.player.highestScore},gotoHome:function(){this.homePageNode.active=!0},onKeyDown:function(e){if(1!=this.homePageNode.active){var t=this.sk.MoveDir;switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:t="left",console.log("left"),this.pressEnable=!1,t!=this.sk.MoveDir&&(this.touchEnable=!1),this.sk.setDir(t);break;case cc.macro.KEY.d:case cc.macro.KEY.right:t="right",console.log("right"),this.pressEnable=!1,t!=this.sk.MoveDir&&(this.touchEnable=!1),this.sk.setDir(t);break;case cc.macro.KEY.w:case cc.macro.KEY.up:t="up",console.log("up"),this.pressEnable=!1,t!=this.sk.MoveDir&&(this.touchEnable=!1),this.sk.setDir(t);break;case cc.macro.KEY.s:case cc.macro.KEY.down:t="down",console.log("down"),this.pressEnable=!1,t!=this.sk.MoveDir&&(this.touchEnable=!1),this.sk.setDir(t)}}},startGame:function(){this.sk.updatePos(),this.touchEnable=!0,this.collideListener()},collideListener:function(){var e=this,t=e.sk.getHeadGrid(),n=o.checkCollide(t[0],t[1]);null!=n&&(n.hasOwnProperty("name")?"body0"!=n.name&&("apple"==n.name?(e.createApple(),e.sk.grow(),e.scoreNum+=1,e.speederNum+=1,e.speederNum==this._settingData.intervalNum&&(e.snakeSpeed-=this._settingData.reduceTime,e.snakeSpeed=e.snakeSpeed<=this._settingData.minTime?this._settingData.minTime:e.snakeSpeed,e.unschedule(e.startGame),e.schedule(e.startGame,e.snakeSpeed),e.speederNum=0),this.speedLab.string="Speed: "+e.snakeSpeed.toFixed(2)):"body"==n.type?(e.unschedule(e.startGame),e.touchEnable=!1,e.sk.blink(function(){e.showGameResult()})):"portal"==n.type&&e.sk.setHeadGrid(n.link[0],n.link[1])):"fence"==n.type?(e.unschedule(e.startGame),e.touchEnable=!1,e.sk.blink(function(){e.showGameResult()})):"block"==n.type&&(e.unschedule(e.startGame),e.touchEnable=!1,e.sk.blink(function(){e.showGameResult()})))},showGameResult:function(e){void 0===e&&(e=!1),Global.panel.openLoading(),Global.panel.showAsynPanelByName(n.PERLOAD_NAME.result).then(function(t){Global.panel.closeLoading(),t.getComponent(t.name).setData(e)},function(){Global.panel.closeLoading()})},initData:function(){this.scoreNum=0,this.snakeSpeed=this._settingData.initTime,this.superNum=0,this.speederNum=0,this.restNum=0},reset:function(){this.initData(),o.resetBodyCol(),this.sk.kill(),this.sk.initSnake(),this.createApple(),this.pc.createPort(),this.schedule(this.startGame,this.snakeSpeed),this.speedLab.string="Speed: "+this.snakeSpeed},createApple:function(){var e=this.apple.node;e.width=e.height=Global.cGridSize,e.opacity=0;var t=o.randomEmptyPos(),n=t[0],i=t[1];o.setCollide(n,i,{name:"apple"}),e.setPosition(n*Global.cGridSize,i*Global.cGridSize),e.opacity=255},onClickArrowBtn:function(e,t){console.log("onClickArrowBtn:"+t);var n=Object.keys(i).length;this._curLevel+=1*t,this._curLevel=this._curLevel<0?n-1:this._curLevel,this._curLevel=this._curLevel>n-1?0:this._curLevel,this.levelLab.string=Global.languageData.t("label_text."+i[this._curLevel]),this._settingData=a[this._curLevel],console.log("settingData:"+this._curLevel+" ** "+JSON.stringify(this._settingData))},onClickSettingBtn:function(){Global.musicManager.playClickEffect(),Global.panel.openLoading(),Global.panel.showAsynPanelByName(n.PERLOAD_NAME.setting).then(function(){Global.panel.closeLoading()},function(){Global.panel.closeLoading()})},onClickOptionsBtn:function(){Global.musicManager.playClickEffect();var e={initTime:this._settingData.initTime,reduceTime:this._settingData.reduceTime,intervalNum:this._settingData.intervalNum,minTime:this._settingData.minTime};this.settingPanel.active=!0,this._settingCtrl.onSetData(this,e),this.onClickPauseOrResumeBtn(null,0)},onClickConfirmBtn:function(e){this._settingData=e},onClickSoundToggle:function(e){Global.musicManager.playClickEffect();var t=1==e.isChecked?1:0;cc.sys.localStorage.setItem(n.KEY.soundStatus,t),1==t?(Global.musicManager.pauseBGMusic(),Global.musicManager.stopAllEffects()):Global.musicManager.resumeMusic()},onClickHelpBtn:function(){Global.musicManager.playClickEffect(),Global.panel.openLoading(),Global.panel.showAsynPanelByName(n.PERLOAD_NAME.help).then(function(){Global.panel.closeLoading()},function(){Global.panel.closeLoading()})},onClickPlayBtn:function(){Global.musicManager.playClickEffect(),this.playGame()},onClickPauseOrResumeBtn:function(e,t){void 0===t&&(t=1),Global.musicManager.playClickEffect(),0==t?cc.director.pause():cc.director.resume()},onDestroy:function(){Global.emitter.off(n.clientEvent.EnterBackground,this),Global.emitter.off(n.clientEvent.EnterForeground,this),this.unregisterEvent()}}),cc._RF.pop()},{GameConfig:"GameConfig",collideManager:"collideManager"}],MusicManager:[function(e,t){"use strict";cc._RF.push(t,"a131elNKz9EA7wE3M6Jc28K","MusicManager");var n=e("GameConfig"),o=function(){this.resetData()},i=o.prototype,a=null;i.resetData=function(){},i.playEffect=function(e,t,o,i){void 0===o&&(o=!1),void 0===i&&(i=!1);var a=cc.sys.localStorage.getItem(n.KEY.soundStatus);if(1!=a||0!=i){1==o&&cc.audioEngine.stopAllEffects();var s=Global.resourceManager.getRes(e);if(s&&cc.isValid(s)){var c=i?cc.audioEngine.playMusic(s,!0):cc.audioEngine.play(s,!1,1);1==a&&1==i&&cc.audioEngine.pauseMusic(),cc.audioEngine.setFinishCallback(c,function(){t&&t()})}else cc.loader.loadRes(e,cc.AudioClip,function(n,o){if(n)console.error(n);else{var s=i?cc.audioEngine.playMusic(o,!0):cc.audioEngine.play(o,!1,1);1==a&&1==i&&cc.audioEngine.pauseMusic(),cc.audioEngine.setFinishCallback(s,function(){t&&t()}),Global.resourceManager.setRes(e,o)}})}},i.playBGM=function(e){this.playEffect(e,null,!1,!0)},i.playClickEffect=function(e){this.playEffect("audio/click",e)},i.playCloseEffect=function(e){this.playEffect("audio/close",e)},i.pauseBGMusic=function(){cc.audioEngine.pauseMusic()},i.resumeMusic=function(){cc.audioEngine.resumeMusic()},i.stopAllEffects=function(){cc.audioEngine.stopAllEffects()},t.exports=function(){return a||(a=new o),a},cc._RF.pop()},{GameConfig:"GameConfig"}],Panel:[function(e,t){"use strict";cc._RF.push(t,"59b5fRoDLBIzLjHPRSPOWw9","Panel");var n=e("GameConfig"),o=function(){this.resetData()},i=o.prototype,a=null;i.resetData=function(){},i.showAsynPanelByName=function(e,t,n){var o=this,i=this;return t=t||cc.director.getScene(),new Promise(function(a,s){var c=Global.resourceManager.getRes(e);c?a(o.showChildPanel(c,t,n)):cc.loader.loadRes(e,cc.Prefab,function(e,o){e?s(e):(Global.resourceManager.setRes(o),a(i.showChildPanel(o,t,n)))})})},i.showChildPanel=function(e,t,n){var o=cc.instantiate(e);return n&&o.getComponent(o.name).set("fromTag",n),o.parent=t,o},i.closeChildPanel=function(e,t){var n=(t=t||cc.director.getScene()).children;if(n)for(var o=0;o<n.length;o++){var i=n[o],a=i.getComponent(i.name);a&&null!=a.get&&a.get("fromTag")===e&&i.destroy()}},i.showPrompt=function(e){Global.musicManager.playEffect(n.PERLOAD_NAME.msg),this.showAsynPanelByName(n.PERLOAD_NAME.promptUI).then(function(t){t.getComponent(t.name).showDes(e)})},i.openLoading=function(e,t){void 0===t&&(t=2e4),this.showAsynPanelByName(n.PERLOAD_NAME.loading,null,n.LAYER_ORDER.mask).then(function(n){n.getComponent(n.name).startCountDown(e,t)})},i.closeLoading=function(){this.closeChildPanel(n.LAYER_ORDER.mask)},t.exports=function(){return a||(a=new o),a},cc._RF.pop()},{GameConfig:"GameConfig"}],PreLoadManager:[function(e,t){"use strict";cc._RF.push(t,"31942JE5IZM5ISfE8tlXIGH","PreLoadManager");var n=e("GameConfig");cc.Class({extends:cc.Component,properties:{_loadList:[],_loadCount:0,_loadedCount:0,_curResUrl:""},onLoad:function(){startGame(),this._loadList=[{url:n.PERLOAD_NAME.bgMusic,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.countDown_nor,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.countDown_go,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.highScore,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.lowScore,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.success,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.break,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.crash,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.click,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.close,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.jump,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.select,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.msg,type:"localAudioClip",format:"mp3"},{url:n.PERLOAD_NAME.promptUI,type:"prefab"},{url:n.PERLOAD_NAME.loading,type:"prefab"},{url:n.PERLOAD_NAME.setting,type:"prefab"},{url:n.PERLOAD_NAME.result,type:"prefab"},{url:n.PERLOAD_NAME.help,type:"prefab"}],this._loadCount=this._loadList.length,this.loadRes()},loadRes:function(){var e=this;if(this._loadList.length<=0)this.preloadDone();else{var t=this._loadList.shift();"scene"==t.type?cc.director.preloadScene(t.url,function(){e._loadCount++,e.updateProgress(e._loadedCount,e._loadCount),e.loadRes()}):"spriteAtlas"==t.type?cc.loader.loadRes(t.url,cc.SpriteAtlas,this.loadCompleteCallback.bind(this)):"remoteAudioClip"==t.type?cc.loader.load({url:t.url,type:t.format},this.loadCompleteCallback.bind(this)):cc.loader.loadRes(t.url,this.loadCompleteCallback.bind(this)),this._curResUrl=t.url}},loadCompleteCallback:function(e,t){this._loadedCount++,this.updateProgress(this._loadedCount,this._loadCount),e?console.log(e):this.parseResource(t),this.loadRes()},parseResource:function(e){Global.resourceManager.setRes(this._curResUrl,e)},preloadDone:function(){},updateProgress:function(){}}),cc._RF.pop()},{GameConfig:"GameConfig"}],ResourceManager:[function(e,t){"use strict";cc._RF.push(t,"b9498yjFjFFRYAnV1hTfZhI","ResourceManager");var n=function(){this.resetData()},o=n.prototype,i=null;o.resetData=function(){this._cacheList=[]},o.setRes=function(e,t){this._cacheList[e]=t},o.getRes=function(e){return this._cacheList[e]},o.getSpriteFrameFromAtlas=function(e,t){return this.getRes(e).getSpriteFrame(t)},o.loadRes=function(e,t){var n=this.getRes(e);if(null!=n)return console.log("\u5df2\u7ecf\u5b58\u5728\uff1a"+e),void(t&&t(n));var o=this;cc.loader.loadRes(e,function(n,i){n?console.error(n):o.setRes(e,i),null!=t&&t(i)})},o.releaseRes=function(e){this._cacheList[e].destroy();var t=cc.loader.getDependsRecursively(e);cc.loader.release(t)},t.exports=function(){return i||(i=new n),i},cc._RF.pop()},{}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],Tools:[function(e,t){"use strict";cc._RF.push(t,"b0725gdMZNKXrVND8Mafz7Y","Tools");var n=function(){this.resetData()},o=n.prototype,i=null;o.resetData=function(){},o.setSpriteImg=function(e,t){null!=e&&Global.resourceManager.loadRes(t,function(t){e.spriteFrame=new cc.SpriteFrame(t)})},o.getRandomNum=function(e,t){return parseInt(Math.random()*(t-e+1)+e)},o.getRandomArray=function(e){for(var t=[],n=0;n<e;n++)t.push(n);for(var o=0;o<t.length;o++){var i=parseInt(Math.random()*t.length),a=t[i];t[i]=t[o],t[o]=a}return t},o.fitFunc=function(e){var t=cc.view.getVisibleSize(),n=cc.view.getDesignResolutionSize();t.width/n.width>t.height/n.height?(cc.log("fitHeight"),e.fitHeight=!0,e.fitWidth=!1):t.width/n.width<t.height/n.height&&(cc.log("fitWidth"),e.fitHeight=!1,e.fitWidth=!0)},o.numberFormat=function(e){var t,n={};return e<1e3?(n.value=e,n.unit=""):(t=Math.floor(Math.log(e)/Math.log(1e3)),n.value=(e/Math.pow(1e3,t)).toFixed(2),n.unit=["","K","M","B","t","q","Q","s","g","G","r"][t]),n},o.getNumStr=function(e){var t=this.numberFormat(e),n=""+t.value,o=n.indexOf(".");if(o>=0&&3!==o)for(n=n.substring(0,4);n.length>0;){var i=n[n.length-1];if("0"!=i&&"."!=i)break;if(n=n.substring(0,n.length-1),"."===i)break}else n=n.substring(0,3);return n+t.unit},o.getBase64Image=function(e){return new Promise(function(t,n){cc.loader.loadRes(e,function(e,o){if(e)n(e);else{var i=document.createElement("CANVAS"),a=i.getContext("2d"),s=o.getHtmlElementObj();i.width=s.width,i.height=s.height,a.drawImage(s,0,0,i.width,i.height);var c=i.toDataURL("image/png");i=null,t(c)}})})},o.myBrowser=function(){var e="other";if(window.navigator&&window.navigator.hasOwnProperty("userAgent")){var t=window.navigator.userAgent;t.indexOf("OPR")>-1||t.indexOf("Opera")>-1?e="Opera":t.indexOf("Firefox")>-1?e="Firefox":t.indexOf("Chrome")>-1?e="Chrome":t.indexOf("Safari")>-1&&(e="Safari")}return e},o.timeFormat=function(e){var t=new Date(parseInt(e)),n=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var i=t.getDate();return n+o+(i<10?"0"+i:i)},o.deepClone=function(e){var t,n=function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)},o=n(e);if("Object"===o)t={};else{if("Array"!==o)return e;t=[]}for(var i in e){var a=e[i];"Object"==n(a)?t[i]=arguments.callee(a):"Array"==n(a)?t[i]=arguments.callee(a):t[i]=e[i]}return t},t.exports=function(){return i||(i=new n),i},cc._RF.pop()},{}],block:[function(e,t){"use strict";cc._RF.push(t,"bfdbcnToaVO6ZuczLPeQfZf","block"),cc.Class({extends:cc.Component,properties:{blockArr:{default:null,type:cc.SpriteFrame}},onLoad:function(){},changeTexture:function(e){this.node.getComponent(cc.Sprite).spriteFrame=this.blockArr[e]}}),cc._RF.pop()},{}],body:[function(e,t){"use strict";cc._RF.push(t,"fb603Rp8kpHtayqid3vFZbG","body"),cc.Class({extends:cc.Component,properties:{head:{default:null,type:cc.SpriteFrame},body:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.sp=this.node.addComponent(cc.Sprite),this.sp.spriteFrame=this.head,this.node.width=this.node.height=Global.cGridSize},updatePos:function(){this.node.setPosition(this.posx*Global.cGridSize,this.posy*Global.cGridSize)},setPro:function(e,t,n){n?(this.sp.spriteFrame=this.head,this.node.zIndex=1):this.sp.spriteFrame=this.body,this.posx=e,this.posy=t,this.updatePos(e,t)}}),cc._RF.pop()},{}],build:[function(e,t){"use strict";cc._RF.push(t,"0d94fvvIxZFNogXnBYdjx/r","build"),cc.Class({extends:cc.Component,properties:{rect0:cc.Prefab,rect1:cc.Prefab,rect2:cc.Prefab,rect3:cc.Prefab,rect4:cc.Prefab,rect5:cc.Prefab,rect6:cc.Prefab,rect7:cc.Prefab,player:cc.Prefab,basepoint:cc.Prefab,button:cc.Label,score:cc.Label,over:cc.Node,sliderv:cc.Slider,audio:cc.AudioClip},onLoad:function(){cc.log("onload start"),this.gameState=1,cc.audioEngine.playEffect(this.audio,!0),this.scoreNum=0,this.leftX,this.rightX,this.speed=.5,this.direction=0,this.snakeArrX=[],this.snakeArrY=[],this.snakeArr=[],this.nextGoal=Math.floor(7*Math.random()),this.goalX=Math.floor(10*Math.random()),this.goalY=Math.floor(15*Math.random()),this.snakeHead=cc.instantiate(this.rect7).getComponent("rect"),this.snakeHead.node.x=240,this.snakeHead.node.y=336,cc.find("Canvas/box").addChild(this.snakeHead.node),this.snakeArrX[0]=this.snakeHead.node.x,this.snakeArrY[0]=this.snakeHead.node.y,this.snakeArr[0]=this.snakeHead,this.boxMap=[];for(var e=0;e<10;e++){this.boxMap[e]=[];for(var t=0;t<15;t++)this.boxMap[e][t]=0}cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.setGame(),cc.log("onload end")},setGame:function(){cc.log("setGame start");var e=this.nextGoal;this.buildBody(e),cc.log("setGame end")},buildBody:function(e){cc.log("goal:"+e),this.produceFoot(),this.schedule(this.move,this.speed),cc.log("goal2:"+e)},overlapFoot:function(){this.goalX=Math.floor(10*Math.random()),this.goalY=Math.floor(15*Math.random());for(var e=0;e<this.snakeArrX.length;e++)if(1===this.boxMap[this.goalX][this.goalY]){this.overlapFoot();break}this.produceFoot()},produceFoot:function(){this.nextGoal=Math.floor(7*Math.random()),0===this.nextGoal&&(this.prefab=this.rect0),1===this.nextGoal&&(this.prefab=this.rect1),2===this.nextGoal&&(this.prefab=this.rect2),3===this.nextGoal&&(this.prefab=this.rect3),4===this.nextGoal&&(this.prefab=this.rect4),5===this.nextGoal&&(this.prefab=this.rect5),6===this.nextGoal&&(this.prefab=this.rect6),this.snakeBody=cc.instantiate(this.prefab).getComponent("rect"),cc.find("Canvas/box").addChild(this.snakeBody.node),this.snakeBody.node.x=48*this.goalX,this.snakeBody.node.y=48*this.goalY;var e=this.snakeBody.node.x/48,t=this.snakeBody.node.y/48;this.boxMap[e][t]=1},eatFoot:function(){var e=this.snakeHead.node.x/48,t=this.snakeHead.node.y/48;if(1===this.boxMap[e][t]){var n=this.snakeArrX.length;this.snakeArrX[n]=this.snakeBody.node.x,this.snakeArrY[n]=this.snakeBody.node.y,this.snakeArr[n]=this.snakeBody,this.boxMap[e][t]=0,this.addScore(),this.overlapFoot()}},addScore:function(){0===this.nextGoal&&(this.scoreNum+=50),1===this.nextGoal&&(this.scoreNum+=100),2===this.nextGoal&&(this.scoreNum+=200),3===this.nextGoal&&(this.scoreNum+=300),4===this.nextGoal&&(this.scoreNum+=400),5===this.nextGoal&&(this.scoreNum+=500),6===this.nextGoal&&(this.scoreNum+=600),this.score.string=this.scoreNum},move:function(){0===this.direction?(this.isGameOver(this.snakeHead.node.x,this.snakeHead.node.y+48),1===this.gameState&&(this.snakeHead.node.y+=48)):1===this.direction?(this.isGameOver(this.snakeHead.node.x,this.snakeHead.node.y-48),1===this.gameState&&(this.snakeHead.node.y-=48)):2===this.direction?(this.isGameOver(this.snakeHead.node.x-48,this.snakeHead.node.y),1===this.gameState&&(this.snakeHead.node.x-=48)):3===this.direction&&(this.isGameOver(this.snakeHead.node.x+48,this.snakeHead.node.y),1===this.gameState&&(this.snakeHead.node.x+=48)),1===this.gameState&&(this.eatFoot(),this.moveAll())},moveAll:function(){for(var e=this.snakeArrX.length-1;e>0;e--)this.snakeArrX[e]=this.snakeArrX[e-1],this.snakeArrY[e]=this.snakeArrY[e-1];this.snakeArrX[0]=this.snakeHead.node.x,this.snakeArrY[0]=this.snakeHead.node.y;for(var t=1;t<this.snakeArrX.length;t++)this.snakeArr[t].node.x=this.snakeArrX[t],this.snakeArr[t].node.y=this.snakeArrY[t];cc.log("moveAll"+this.snakeArrX.length)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.a:case cc.macro.left:3!=this.direction&&(this.direction=2);break;case cc.macro.d:case cc.macro.right:2!=this.direction&&(this.direction=3);break;case cc.macro.w:case cc.macro.up:1!=this.direction&&(this.direction=0);break;case cc.macro.s:case cc.macro.down:0!=this.direction&&(this.direction=1)}},isGameOver:function(e,t){if(e<0||e>=480||t<0||t>=720)this.gameOver();else for(var n=0;n<this.snakeArrX.length;n++)if(this.snakeArrX[n]==e&&this.snakeArrY[n]==t)return void this.gameOver()},gameOver:function(){this.gameState=2,this.over.active=!0,this.unschedule(this.move),cc.audioEngine.stopAll()},pause:function(){2!==this.gameState&&(1===this.gameState?(this.gameState=0,this.button.string="Play",this.unschedule(this.move)):0===this.gameState&&(this.gameState=1,this.button.string="Pause",this.schedule(this.move,this.speed)))},replay:function(){cc.director.loadScene("snaker")}}),cc._RF.pop()},{}],collideManager:[function(e,t){"use strict";cc._RF.push(t,"ec9de6SkO9PwrgjL1UF3MqN","collideManager");var n={setCollide:function(e,t,n){var o=Global.makePosKey(e,t);if(n.hasOwnProperty("name"))for(var i in Global.Pos2EventMap)Global.Pos2EventMap[i].hasOwnProperty("name")&&Global.Pos2EventMap[i].name==n.name&&(Global.makeKeyPos(i),delete Global.Pos2EventMap[i]);if(null!=Global.Pos2EventMap[o])return Global.Pos2EventMap[o].hasOwnProperty("name")&&"body0"!=n.name&&"body"==n.type&&"portal"!=Global.Pos2EventMap[o].type?(delete Global.EmptyPos[o],void(Global.Pos2EventMap[o]=n)):void 0;delete Global.EmptyPos[o],Global.Pos2EventMap[o]=n},checkCollide:function(e,t){return Global.Pos2EventMap[Global.makePosKey(e,t)]},resetCollide:function(){Global.Pos2EventMap={}},randomEmptyPos:function(){var e,t=Object.keys(Global.EmptyPos),n=t[(e=t.length-1,0,Math.floor(Math.random()*(e-0+1)+0))];return Global.EmptyPos[n]},resetBodyCol:function(){for(var e in Global.Pos2EventMap)"body"==Global.Pos2EventMap[e].type&&(delete Global.Pos2EventMap[e],Global.makeKeyPos[e])},getEventByKey:function(e,t){var n=Global.makePosKey(e,t);return Global.Pos2EventMap[n]}};t.exports=n,cc._RF.pop()},{}],emitter:[function(e,t){"use strict";cc._RF.push(t,"af14eiX8uJLo6eO4nPr7xmX","emitter");var n=function(e,t){for(var n=0;n<e.length;++n)if(e[n].obj===t)return n;return-1},o=null;function i(e){if(e)return a(e)}function a(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=function(){return o||(o=new i),o},i.prototype.on=function(e,t,n){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push({func:t,obj:n}),this},i.prototype.once=function(e,t,n){var o=this;function i(){o.off(e,i),t.apply(n,arguments)}return this._callbacks=this._callbacks||{},t._off=i,this.on(e,i,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o=this._callbacks[e];if(!o)return this;if(1==arguments.length)return delete this._callbacks[e],this;var i=n(o,t);return~i&&o.splice(i,1),this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){console.log("\u53d1\u9001\u4e86\u4e8b\u4ef6",e,t);for(var o=0,i=(n=n.slice(0)).length;o<i;++o){var a=n[o].obj;n[o].func&&n[o].func.apply(a,t)}}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length},cc._RF.pop()},{}],fences:[function(e,t){"use strict";cc._RF.push(t,"0a220mNi5dBRaqDXuPtV/nb","fences");var n=e("collideManager");cc.Class({extends:cc.Component,properties:{fence:{default:null,type:cc.Prefab},fenceSpArr:null},onLoad:function(){this.fenceSpArr=[],this.fencePool=new cc.NodePool;for(var e=4*Global.cBound,t=0;t<e;++t){var n=cc.instantiate(this.fence);n.width=Global.cGridSize,n.height=Global.cGridSize,this.fencePool.put(n)}this.fencesInit()},createFence:function(e,t){var n=null;this.fencePool.size()>0?n=this.fencePool.get():((n=cc.instantiate(this.fence)).width=Global.cGridSize,n.height=Global.cGridSize),n.setPosition(e*Global.cGridSize,t*Global.cGridSize),this.fenceSpArr.push(n),n.parent=this.node},fenceGenerator:function(e,t){for(var n=-e;n<e+1;n++){var o=t(n);this.createFence(o[0],o[1])}},fencesInit:function(){this.fenceGenerator(Global.cBound,function(e){return n.setCollide(Global.cBound,e,{type:"fence"}),[Global.cBound,e]}),this.fenceGenerator(Global.cBound,function(e){return n.setCollide(-Global.cBound,e,{type:"fence"}),[-Global.cBound,e]}),this.fenceGenerator(Global.cBound,function(e){return n.setCollide(e,Global.cBound,{type:"fence"}),[e,Global.cBound]}),this.fenceGenerator(Global.cBound,function(e){return n.setCollide(e,-Global.cBound,{type:"fence"}),[e,-Global.cBound]})},reset:function(){this.node.removeAllChildren()}}),cc._RF.pop()},{collideManager:"collideManager"}],help:[function(e,t){"use strict";cc._RF.push(t,"9041fzp8YFEyYbM9ycW9SOH","help"),cc.Class({extends:cc.Component,properties:{playLab:{default:null,type:cc.RichText}},onLoad:function(){Global.language,this.playLab.string="How to Play."},onClickCloseBtn:function(){Global.musicManager.playCloseEffect(),this.node.destroy()},set:function(e,t){this[e]=t},get:function(e){return this[e]}}),cc._RF.pop()},{}],loading:[function(e,t){"use strict";cc._RF.push(t,"34e7aFW/uVFVIfXycZW6RWT","loading"),cc.Class({extends:cc.Component,properties:{cycleIcon:{default:null,type:cc.Node},heartIcon:{default:null,type:cc.Node},_timeout:null},onLoad:function(){if(this.cycleIcon){var e=this;this.cycleIcon.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.cycleIcon.angle-=20}),cc.delayTime(.05))))}this.heartIcon&&this.heartIcon.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,0,1),cc.delayTime(.2),cc.scaleTo(.3,1,1),cc.delayTime(.2))))},startCountDown:function(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(function(){e&&e(),Global.panel.closeLoading()},t)},set:function(e,t){this[e]=t},get:function(e){return this[e]}}),cc._RF.pop()},{}],openAnimation:[function(e,t){"use strict";cc._RF.push(t,"65bb247RRlErZfb4piDG0lH","openAnimation");var n=cc.Enum({SCALE:0,DOWN:1,LEFT:2,UP:3,RIGHT:4});cc.Class({extends:cc.Component,properties:{playOnLoad:!0,animType:{default:n.SCALE,type:n,displayName:"\u5f39\u7a97\u52a8\u753b\u7c7b\u578b"},endPos:{default:new cc.Vec2(0,0)},runTime:{default:.8,step:.1},_originalPos:null},onEnable:function(){0!=this.playOnLoad&&this.playAnimation(!0,!0)},playAnimation:function(e,t){switch(void 0===e&&(e=!0),void 0===t&&(t=!0),this.animType){case n.SCALE:this.scale_Function(e,t);break;case n.DOWN:case n.LEFT:case n.UP:case n.RIGHT:this.move_Function(e,t);break;default:console.error("\u52a8\u753b\u7c7b\u578b\u4e0d\u5b58\u5728 ! ")}},scale_Function:function(){var e=cc.scaleTo(.2,1);e.easing(cc.easeBackOut(.2));var t=[e,cc.fadeIn(.2)];this.node.stopAllActions(),this.node.setScale(.7),this.node.opacity=0;var n=cc.spawn(t);this.node.runAction(n)},move_Function:function(e,t){var o=null;switch(cc.winSize,this.animType){case n.SCALE:case n.DOWN:break;case n.LEFT:o=e?new cc.Vec2(this.endPos.x,this.node.y):new cc.Vec2(-2*cc.winSize.width,this.node.y);break;case n.UP:break;case n.RIGHT:o=e?new cc.Vec2(this.endPos.x,this.node.y):new cc.Vec2(2*cc.winSize.width,this.node.y);break;default:console.error("\u52a8\u753b\u7c7b\u578b\u4e0d\u5b58\u5728 ! ")}null!=o?t?this.node.runAction(cc.moveTo(this.runTime,o).easing(cc.easeBackInOut())):this.node.setPosition(o):this.node.setPosition(this.endPos)}}),cc._RF.pop()},{}],"polyglot.min":[function(e,t,n){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min"),function(e,o){"function"==typeof define&&define.amd?define([],function(){return o(e)}):"object"==typeof n?t.exports=o(e):e.Polyglot=o(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||r}function n(e){var t,n,o,i={};for(t in e)if(e.hasOwnProperty(t))for(o in n=e[t])i[n[o]]=t;return i}function o(e){return e.replace(/^\s+|\s+$/g,"")}function i(e,t,n){var i;return null!=n&&e?o((i=e.split(u))[s(t,n)]||i[0]):e}function a(e){var t=n(d);return t[e]||t.en}function s(e,t){return h[a(e)](t)}function c(e,t){for(var n in t)"_"!==n&&t.hasOwnProperty(n)&&(e=e.replace(new RegExp("%\\{"+n+"\\}","g"),t[n]));return e}function r(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function l(e){var t={};for(var n in e)t[n]=e[n];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var n;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],t&&(o=t+"."+o),"object"==typeof n?this.extend(n,o):this.phrases[o]=n)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var n,o;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),o=e),"string"==typeof n&&(t=l(t),o=c(o=i(n,this.currentLocale,t.smart_count),t)),o},t.prototype.has=function(e){return e in this.phrases};var u="||||",h={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},d={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],portal:[function(e,t){"use strict";cc._RF.push(t,"563d5hItgRBI6IuyKCnAJe/","portal");var n=e("collideManager");cc.Class({extends:cc.Component,properties:{a:{default:null,type:cc.Node},b:{default:null,type:cc.Node}},onLoad:function(){},createPort:function(){var e=n.randomEmptyPos();n.setCollide(e[0],e[1],{name:"portala",type:"portal",link:[]});var t=n.randomEmptyPos();n.setCollide(t[0],t[1],{name:"portalb",type:"portal",link:e.slice(0,2)}),n.getEventByKey(e[0],e[1]).link=t.slice(0,2),this.setPortPosition(this.a,e),this.setPortPosition(this.b,t),this.a.width=this.b.width=this.a.height=this.b.height=Global.cGridSize},setPortPosition:function(e,t){e.setPosition(t[0]*Global.cGridSize,t[1]*Global.cGridSize),e.opacity=255}}),cc._RF.pop()},{collideManager:"collideManager"}],promptUI:[function(e,t){"use strict";cc._RF.push(t,"397e3f5uUFJO5P8TyQdbRDB","promptUI");var n=cc.Class({extends:cc.Component,properties:{desLbl:cc.Label,coinNode:cc.Node,gemNode:cc.Node},showDes:function(e,t){this.desLbl.string=e,this.coinNode.active=!1,this.gemNode.active=!1,"coin"==t?this.coinNode.active=!0:"gem"==t&&(this.gemNode.active=!0);var n=this;this.node.runAction(cc.sequence(cc.moveBy(.2,0,150),cc.moveBy(1,0,0),cc.moveBy(.2,0,150),cc.fadeOut(.2),cc.callFunc(function(){n.node.destroy()})))},set:function(e,t){this[e]=t},get:function(e){return this[e]}});t.exports=n,cc._RF.pop()},{}],rect:[function(e,t){"use strict";cc._RF.push(t,"20127cQSZ9N0bB8afm8IEjY","rect"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],result:[function(e,t){"use strict";cc._RF.push(t,"6c4dfRtQypNFpkmKr4xbWmC","result");var n=e("GameConfig");cc.Class({extends:cc.Component,properties:{gameOver:{default:null,type:cc.Node},scoreLab:{default:null,type:cc.Label},highestLab:{default:null,type:cc.Label}},onLoad:function(){Global.emitter.on(n.clientEvent.EnterBackground,this.EnterBackground,this),Global.emitter.on(n.clientEvent.EnterForeground,this.EnterForeground,this),this.registerEvent(),this.isBackGround=!1,Global.musicManager.playEffect(n.PERLOAD_NAME.success),this.updateHighestScore(),Global.watchedRewardedVideos>=1?++Global.gameContinued:Global.watchedRewardedVideos<1&&++Global.gameNonContinued,Global.gct.setUserProperties({gameCompleted:++Global.gameCompleted,gameContinued:Global.gameContinued,gameNonContinued:Global.gameNonContinued})},EnterBackground:function(){this.isBackGround=!0,this.unregisterEvent()},EnterForeground:function(){this.isBackGround&&(this.isBackGround=!1,this.registerEvent())},registerEvent:function(){Global.emitter.on(n.clientEvent.playGame,this.playGame,this)},unregisterEvent:function(){Global.emitter.off(n.clientEvent.playGame,this)},playGame:function(){this.node.destroy()},setData:function(e){this.gameOver.active=!e},updateHighestScore:function(){Global.player.curScore>Global.player.highestScore&&(Global.player.highestScore=Global.player.curScore,cc.sys.localStorage.setItem("highestScore",Global.player.highestScore)),this.highestLab.string=Global.player.highestScore,this.scoreLab.string=Global.player.curScore},onClickHomeBtn:function(){Global.musicManager.playClickEffect(),this.node.destroy(),Global.gameCtrl.gotoHome()},onClickRePlayBtn:function(){this.continue({reStart:!0,source:n.Source.retry})},continue:function(){var e=this,t=[];t.push(cc.callFunc(function(){Global.gameCtrl.onClickPlayBtn()})),t.push(cc.delayTime(.2)),t.push(cc.callFunc(function(){e.node.destroy()})),this.node.runAction(cc.sequence(t))},set:function(e,t){this[e]=t},get:function(e){return this[e]},onDestroy:function(){Global.emitter.off(n.clientEvent.EnterBackground,this),Global.emitter.off(n.clientEvent.EnterForeground,this),this.unregisterEvent()}}),cc._RF.pop()},{GameConfig:"GameConfig"}],settingCtrl:[function(e,t){"use strict";cc._RF.push(t,"4f083H8gQlOCpbjDw7imaz8","settingCtrl"),cc.Class({extends:cc.Component,properties:{initTimeEditBox:{default:null,type:cc.EditBox},reduceTimeEditBox:{default:null,type:cc.EditBox},intervalNumEditBox:{default:null,type:cc.EditBox},minTimeEditBox:{default:null,type:cc.EditBox},_parentCtrl:null},onSetData:function(e,t){this._parentCtrl=e,this.initTimeEditBox.string=t.initTime,this.reduceTimeEditBox.string=t.reduceTime,this.intervalNumEditBox.string=t.intervalNum,this.minTimeEditBox.string=t.minTime},onClickConfirmBtn:function(e){this.node.active=!1;var t={initTime:1*this.initTimeEditBox.string,reduceTime:1*this.reduceTimeEditBox.string,intervalNum:1*this.intervalNumEditBox.string,minTime:1*this.minTimeEditBox.string};this._parentCtrl&&(this._parentCtrl.onClickConfirmBtn(t),this._parentCtrl.onClickPauseOrResumeBtn(e,1))},onClickCloseBtn:function(e){this.node.active=!1,this._parentCtrl.onClickPauseOrResumeBtn(e,1)}}),cc._RF.pop()},{}],setting:[function(e,t){"use strict";cc._RF.push(t,"48c0736ZhlCuZtMHOxwvpsl","setting");var n=e("GameConfig");cc.Class({extends:cc.Component,properties:{musicToggle:{default:null,type:cc.Toggle},effectToggle:{default:null,type:cc.Toggle},languageLab:{default:null,type:cc.Label},versionLab:{default:null,type:cc.Label},resetBtn:{default:null,type:cc.Node}},onLoad:function(){var e=cc.sys.localStorage.getItem(n.KEY.bgmusicStatus);null==e||null==e||1==e?this.musicToggle.check():0==e&&this.musicToggle.uncheck(),null==(e=cc.sys.localStorage.getItem(n.KEY.effectStatus))||null==e||1==e?this.effectToggle.check():0==e&&this.effectToggle.uncheck(),this.languageLab.string=Global.languageData.t("label_text.language"),this.versionLab.string=Global.isDebug?"V"+Global.getVersion()+"-Devp":"V"+Global.getVersion()},onClickMusicToggleBtn:function(e){Global.musicManager.playClickEffect();var t=1==e.isChecked?1:0;cc.sys.localStorage.setItem(n.KEY.bgmusicStatus,t),1==t?Global.musicManager.playBGM(n.PERLOAD_NAME.bgMusic):(Global.musicManager.pauseBGMusic(),Global.musicManager.stopAllEffects())},onClickEffectToggleBtn:function(e){Global.musicManager.playClickEffect();var t=1==e.isChecked?1:0;cc.sys.localStorage.setItem(n.KEY.effectStatus,t),0==t&&Global.musicManager.stopAllEffects()},onClickCloseBtn:function(){Global.musicManager.playCloseEffect(),this.node.destroy()},onClickResetBtn:function(){Global.musicManager.playClickEffect()},onClickToggleBtn:function(e,t){Global.musicManager.playClickEffect(),"0"!=t&&Global.panel.showPrompt(Global.languageData.t("label_text.coming"))},set:function(e,t){this[e]=t},get:function(e){return this[e]}}),cc._RF.pop()},{GameConfig:"GameConfig"}],snake:[function(e,t){"use strict";cc._RF.push(t,"a7e32uUNuRCxKU1TnvQ1bPA","snake");var n=e("collideManager"),o={left:90,right:-90,up:180,down:0},i={left:"h",right:"h",up:"v",down:"v"};cc.Class({extends:cc.Component,properties:{bodyPrefab:{default:null,type:cc.Prefab}},onLoad:function(){this.bodyPool=new cc.NodePool;for(var e=0;e<15;e++){var t=cc.instantiate(this.bodyPrefab);this.bodyPool.put(t)}this.BodyArr=[],this.initSnake()},initSnake:function(){for(var e=0;e<1;e++)this.grow(0==e);this.MoveDir="up",this.setDir("left")},createBody:function(e,t,n){var o=null;o=this.bodyPool.size()>0?this.bodyPool.get():cc.instantiate(this.bodyPrefab),this.node.addChild(o),o.getComponent("body").setPro(e,t,n),this.BodyArr.push(o)},grow:function(e){var t=this.getTailGrid();this.createBody(t[0],t[1],e)},setDir:function(e){i[e]!=i[this.MoveDir]&&(this.MoveDir=e,this.BodyArr[0].angle=-o[this.MoveDir])},getTailGrid:function(){if(0==this.BodyArr.length)return[0,0];var e=this.BodyArr[this.BodyArr.length-1].getComponent("body");return[e.posx,e.posy]},setHeadGrid:function(e,t){var n=this.BodyArr[0].getComponent("body");n.posx=e,n.posy=t},getHeadGrid:function(){if(0==this.BodyArr.length)return[0,0];var e=this.BodyArr[0].getComponent("body");return[e.posx,e.posy]},updatePos:function(){var e,t,o,i=this.BodyArr;if(0!=i.length)for(var a=i.length-1;a>=0;a--){var s=i[a].getComponent("body");if(0==a){var c=(e=s.posx,t=s.posy,"left"==(o=this.MoveDir)?[e-1,t]:"right"==o?[e+1,t]:"up"==o?[e,t+1]:"down"==o?[e,t-1]:[e,t]);s.posx=c[0],s.posy=c[1]}else{var r=i[a-1].getComponent("body");s.posx=r.posx,s.posy=r.posy}n.setCollide(s.posx,s.posy,{name:"body"+a,type:"body"}),s.updatePos()}},blink:function(e){for(var t in this.BodyArr){var n=cc.blink(3,5);if(0==t){var o=cc.sequence(n,cc.callFunc(e));this.BodyArr[t].runAction(o)}else this.BodyArr[t].runAction(n)}},kill:function(){for(var e in this.BodyArr)this.bodyPool.put(this.BodyArr[e]);this.BodyArr=[]}}),cc._RF.pop()},{collideManager:"collideManager"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"cfc6fJV+wBLq4lZWWHUh1dk","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","GameConfig","GCTurboAnalytics","Global","MusicManager","Panel","PreLoadManager","ResourceManager","Tools","emitter","openAnimation","ComboBox","Item","MainScene","block","body","build","collideManager","fences","help","loading","portal","promptUI","rect","result","setting","settingCtrl","snake","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);